!function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e,i){"use strict";function s(t,e,i,s,n){var o=Math.floor((t-i)/(e/s));return n&&(o=s-o-1),o}Object.defineProperty(e,"__esModule",{value:!0}),e.getRowCol=void 0,e.getRowCol=function(t,e,i,n,o,r,u,h){return[s(e,i,o,r,h),s(t,i,n,r,u)]}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,n,o=i(2),r=i(3),u=i(4),h=document.getElementsByTagName("canvas")[0],l=h.getContext("2d"),c=[new o.default("2.png",186,27,320,!0),new o.default("2.png",186,27,320,!0),new o.default("2.png",186,27,320,!0),new o.default("2.png",186,27,320,!0),new o.default("2.png",186,27,320,!0),new o.default("2.png",186,27,320,!0),new o.default("2.png",186,27,320,!0),new o.default("2.png",186,27,320,!0)],a=document.getElementById("puzzle-selector"),f=document.getElementById("size");var p=document.getElementById("start");document.getElementById("apply-setting").addEventListener("click",(function(){var t,e;n&&n.stop(),t=c[a.value],e=f.valueAsNumber,s&&s.disconnectView(h),s=new u.default(e,t,20,20,360),n=new r.default((function(){s.update(),s.render(l)})),s.render(l),p.disabled=!1})),p.addEventListener("click",(function(){s.shuffle(),s.updateViewForModel(),s.connectView(h),n.start()}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e,i,s,n){this.texture=new Image,this.texture.src=t,this.srcX=e,this.srcY=i,this.dimension=s,this.screw=n}return t.prototype.getPosition=function(t,e,i){var s=this.dimension/i;return[this.srcX+e*s,this.srcY+t*s]},t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t){this.running=!1,this.a=null,this.update=t}return t.prototype.start=function(){var t=this;this.running=!0,this.a=function(e){t.update(),t.running&&requestAnimationFrame(t.a)},requestAnimationFrame(this.a)},t.prototype.stop=function(){this.running=!1,this.a=null},t}();e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(5),n=i(0);var o=function(){function t(t,e,i,n,o){this.flipH=!1,this.flipV=!0,this.grab=new r,this.rAFSyncMousedownMessage=!1,this.rAFSyncMouseupMessage=!1,this.left=i,this.top=n,this.boardSize=o,this.countDimension=t,this.screw=e.screw;var u=t*t,h=e.dimension/t;this.puzzleModel=new Array(u),this.pieces=new Array(u);for(var l=0;l<u;l++){var c=Math.floor(l/t);this.flipV&&(c=t-c-1);var a=l%t;this.flipH&&(a=t-a-1),this.puzzleModel[l]=l;var f=e.getPosition(c,a,t),p=f[0],d=f[1];this.pieces[l]=new s.default(l,e.texture,p,d,h,o/t)}this.updateViewForModel()}return Object.defineProperty(t.prototype,"right",{get:function(){return this.left+this.boardSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.top+this.boardSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pieceSize",{get:function(){return this.boardSize/this.countDimension},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rowColOfBlank",{get:function(){var t=this.puzzleModel.indexOf(0);return[Math.floor(t/this.countDimension),t%this.countDimension]},enumerable:!1,configurable:!0}),t.prototype.shuffle=function(){var t=this.countDimension*this.countDimension,e=this.puzzleModel,i=function(){for(;;){var i=Math.floor(Math.random()*t);if(0!=e[i])return i}};if(e.sort((function(){return.5-Math.random()})),function(t){for(var e=t.indexOf(0),i=Math.sqrt(t.length),s=(Math.floor(e/i)+e%i)%2,n=0,o=0;o<t.length;o++)for(var r=o+1;r<t.length;r++)t[o]>t[r]&&n++;return n%2==s}(e)!=this.screw){for(var s=i(),n=i();s==n;)n=i();var o=e[s];e[s]=e[n],e[n]=o}},t.prototype.getRowColAt=function(t,e){return n.getRowCol(t,e,this.boardSize,this.left,this.top,this.countDimension,this.flipH,this.flipV)},t.prototype.getPieceAt=function(t,e){var i=e+t*this.countDimension,s=this.puzzleModel[i];return this.pieces[s]},t.prototype.getVector=function(t,e){var i,s,n=new Array(this.countDimension);switch(e){case"row":i=t*this.countDimension,s=1;break;case"col":i=t,s=this.countDimension}for(var o=0;o<this.countDimension;o++)n[o]=this.pieces[this.puzzleModel[i+s*o]];return n},t.prototype.rAFMousedown=function(){},t.prototype.rAFMouseup=function(){},t.prototype.update=function(){var t=this.grab;this.rAFSyncMousedownMessage&&(this.rAFMousedown(),this.rAFSyncMousedownMessage=!1),t.piece&&t.update(this),this.rAFSyncMouseupMessage&&(this.rAFMouseup(),this.rAFSyncMouseupMessage=!1);for(var e=0,i=this.pieces;e<i.length;e++){i[e].update(this)}},t.prototype.updateViewForModel=function(){for(var t=this.countDimension*this.countDimension,e=this.puzzleModel,i=this.pieces,s=this.left,n=this.top,o=this.countDimension,r=this.boardSize,u=0;u<t;u++){var h=e[u],l=Math.floor(u/o);this.flipV&&(l=o-l-1);var c=u%o;this.flipH&&(c=o-c-1),i[h].x=s+c*r/o,i[h].y=n+l*r/o}},t.prototype.connectView=function(t){var e=this;this.mousemove=function(t){e.grab.handleMove(t.offsetX,t.offsetY,e)},this.mouseup=function(i){e.grab.handleRelease(i.offsetX,i.offsetY,i.timeStamp,e),t.removeEventListener("mousemove",e.mousemove),t.removeEventListener("mouseup",e.mouseup),e.rAFSyncMouseupMessage=!0},this.mousedown=function(i){e.grab.handleGrab(i.offsetX,i.offsetY,i.timeStamp,e)&&(t.addEventListener("mousemove",e.mousemove),t.addEventListener("mouseup",e.mouseup),e.rAFSyncMousedownMessage=!0)},t.addEventListener("mousedown",this.mousedown)},t.prototype.disconnectView=function(t){this.mousedown&&t.removeEventListener("mousedown",this.mousedown),this.mousemove&&t.removeEventListener("mousemove",this.mousemove),this.mouseup&&t.removeEventListener("mouseup",this.mouseup)},t.prototype.render=function(t){t.clearRect(0,0,400,400);for(var e=0,i=this.pieces;e<i.length;e++){i[e].render(t)}},t}();e.default=o;var r=function(){function t(){this.startX=null,this.startY=null,this.row=null,this.col=null,this.pieceX=null,this.pieceY=null,this.ix=null,this.iy=null,this.timestamp=null,this.ux=null,this.uy=null,this.vx=null,this.vy=null,this.piece=null,this.concern=null,this.direction=null}return t.prototype.handleGrab=function(t,e,i,s){if(t<s.left||t>s.right||e<s.top||e>s.bottom)return!1;var n=s.rowColOfBlank,o=n[0],r=n[1],u=s.getRowColAt(t,e),h=u[0],l=u[1];if(o==h){if(r==l)return!1;this.direction="h",this.concern=s.getVector(o,"row")}else r==l&&(this.direction="v",this.concern=s.getVector(r,"col"));return this.piece=s.getPieceAt(h,l),this.row=h,this.col=l,this.startX=t,this.startY=e,this.timestamp=i,this.pieceX=t-this.piece.x,this.pieceY=e-this.piece.y,!0},t.prototype.handleMove=function(t,e,i){"h"==this.direction?this.ix=t:"v"==this.direction&&(this.iy=e)},t.prototype.update=function(t){this.vx=0,this.vy=0,null!=this.ux&&(this.vx=this.ix-this.ux),null!=this.uy&&(this.vy=this.iy-this.uy),null!=this.ix&&(this.ux=this.ix),null!=this.iy&&(this.uy=this.iy),"h"==this.direction&&null!=this.ux?this.piece.push(this.vx,"h",t,this.concern):"v"==this.direction&&null!=this.uy&&this.piece.push(this.vy,"v",t,this.concern)},t.prototype.resolveCollision=function(t){for(var e=0,i=this.concern;e<i.length;e++)i[e]},t.prototype.handleRelease=function(t,e,i,s){this.startX,this.startY,this.timestamp;this.startX=null,this.startY=null,this.row=null,this.col=null,this.pieceX=null,this.pieceY=null,this.piece=null,this.direction=null,this.timestamp=null,this.ix=null,this.iy=null,this.ux=null,this.uy=null,this.vx=null,this.vy=null,this.concern=null},t}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(0),n={h:{axis:"x",start:"left",end:"right"},v:{axis:"y",start:"top",end:"bottom"}},o=function(){function t(t,e,i,s,n,o){this.destX=null,this.destY=null,this.velX=0,this.velY=0,this.tag=t,this.texture=e,this.sx=i,this.sy=s,this.srcSize=n,this.size=o}return t.prototype.whereami=function(t,e,i,n,o,r){var u=(null!=this.destX?this.destX:this.x)+this.size/2,h=(null!=this.destY?this.destY:this.y)+this.size/2;return s.getRowCol(u,h,i,t,e,n,o,r)},t.prototype.push=function(e,i,s,o){var r=n[i],u=r.axis,h=r.start,l=r.end,c=null,a=this[u]+e;if(a<s[h]?(c=a-s[h],a=s[h]):a+this.size>s[l]&&(c=a+this.size-s[l],a=s[l]-this.size),this[u]=a,c)return c;for(var f=0,p=o;f<p.length;f++){var d=p[f];if(t.hitTest(this,d)){var v=this.size*Math.sign(e)+this[u]-d[u];if(null!=(c=d.push(v,i,s,o)))return this[u]-=c,c}}return c},t.prototype.update=function(t){this.x+=this.velX,this.y+=this.velY,this.x<t.left?this.x=t.left:this.x+this.size>t.right&&(this.x=t.right-this.size),this.y<t.top?this.y=t.top:this.y+this.size>t.bottom&&(this.y=t.bottom-this.size)},t.prototype.render=function(t){0!=this.tag&&(t.fillStyle="white",t.lineWidth=1,t.fillRect(this.x,this.y,this.size,this.size),t.drawImage(this.texture,this.sx,this.sy,this.srcSize,this.srcSize,this.x,this.y,this.size,this.size),t.strokeRect(this.x,this.y,this.size,this.size),t.font='36px "Exo 2"',t.lineWidth=3,t.strokeText((this.tag+1).toString(),this.x+4,this.y+this.size-4),t.fillText((this.tag+1).toString(),this.x+4,this.y+this.size-4))},t.hitTest=function(t,e){if(t==e||0==t.tag||0==e.tag)return!1;var i=t.x,s=t.x+t.size,n=t.y,o=t.y+t.size,r=e.x,u=e.x+e.size,h=e.y,l=e.y+e.size;return i<u&&r<s&&n<l&&h<o},t}();e.default=o}]);