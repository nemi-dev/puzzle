/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/index.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/Game.ts":
/*!*********************!*\
  !*** ./src/Game.ts ***!
  \*********************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Game; });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config */ \"./src/config.ts\");\n/* harmony import */ var _Piece__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Piece */ \"./src/Piece.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ \"./src/utils.ts\");\n/* harmony import */ var _Input__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Input */ \"./src/Input.ts\");\n\r\n\r\n\r\n\r\nfunction isSolvable(model) {\r\n    let blankIndex = model.indexOf(_config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].blankTag);\r\n    let countDimension = Math.sqrt(model.length);\r\n    let blankRow = Math.floor(blankIndex / countDimension);\r\n    let blankCol = blankIndex % countDimension;\r\n    let parity = (blankRow + blankCol) % 2;\r\n    let inversion = 0;\r\n    for (let i = 0; i < model.length; i++) {\r\n        for (let j = i + 1; j < model.length; j++) {\r\n            if (model[i] > model[j])\r\n                inversion++;\r\n        }\r\n    }\r\n    return inversion % 2 == parity;\r\n}\r\nclass Game {\r\n    constructor(countDimension, puzzleSet, left, top, boardSize) {\r\n        /** 좌우반전 */\r\n        this.flipH = false;\r\n        /** 상하반전 */\r\n        this.flipV = false;\r\n        /** 입렧을 처리하는 컴포넌트 */\r\n        this.input = new _Input__WEBPACK_IMPORTED_MODULE_3__[\"default\"]();\r\n        /** 퍼즐 조각의 움직임을 컨트롤하는 컴포넌트 */\r\n        this.grab = new Grab();\r\n        /** rAF에 동기화된 이벤트 핸들 플래그 */\r\n        this.rAFSyncMousedownMessage = false;\r\n        this.rAFSyncMouseupMessage = false;\r\n        this.left = left;\r\n        this.top = top;\r\n        this.boardSize = boardSize;\r\n        this.countDimension = countDimension;\r\n        this.solvable = puzzleSet.solvable;\r\n        const totalPieces = countDimension * countDimension;\r\n        const puzzleSetDimension = puzzleSet.dimension / countDimension;\r\n        this.puzzleModel = new Array(totalPieces);\r\n        this.pieces = new Array(totalPieces);\r\n        for (let tag = 0; tag < totalPieces; tag++) {\r\n            let vrow = Math.floor(tag / countDimension);\r\n            if (this.flipV)\r\n                vrow = countDimension - vrow - 1;\r\n            let vcol = tag % countDimension;\r\n            if (this.flipH)\r\n                vcol = countDimension - vcol - 1;\r\n            this.puzzleModel[tag] = tag;\r\n            let [x, y] = puzzleSet.getPosition(vrow, vcol, countDimension);\r\n            this.pieces[tag] = new _Piece__WEBPACK_IMPORTED_MODULE_1__[\"default\"](tag, puzzleSet.texture, x, y, puzzleSetDimension, boardSize / countDimension);\r\n        }\r\n        this.initViewForModel();\r\n    }\r\n    /** 캔버스에서 퍼즐의 오른쪽 끝 위치 */\r\n    get right() {\r\n        return this.left + this.boardSize;\r\n    }\r\n    /** 캔버스에서 퍼즐의 아래쪽 끝 위치 */\r\n    get bottom() {\r\n        return this.top + this.boardSize;\r\n    }\r\n    /** 퍼즐 조각 하나의 변의 길이 */\r\n    get pieceSize() {\r\n        return this.boardSize / this.countDimension;\r\n    }\r\n    /** 현재 빈 칸의 행렬 위치 */\r\n    get rowColOfBlank() {\r\n        let i = this.puzzleModel.indexOf(_config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].blankTag);\r\n        return [Math.floor(i / this.countDimension), i % this.countDimension];\r\n    }\r\n    /** 퍼즐을 섞는다. Game 내에 있는 solvable 속성이 적용된다. */\r\n    shuffle() {\r\n        const totalPieces = this.countDimension * this.countDimension;\r\n        const puzzleModel = this.puzzleModel;\r\n        const selectRealPiece = () => {\r\n            do {\r\n                let i = Math.floor(Math.random() * totalPieces);\r\n                let v = puzzleModel[i];\r\n                if (v != _config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].blankTag)\r\n                    return i;\r\n            } while (true);\r\n        };\r\n        puzzleModel.sort(() => 0.5 - Math.random());\r\n        if (isSolvable(puzzleModel) != this.solvable) {\r\n            let a = selectRealPiece();\r\n            let b = selectRealPiece();\r\n            while (a == b)\r\n                b = selectRealPiece();\r\n            let t = puzzleModel[a];\r\n            puzzleModel[a] = puzzleModel[b];\r\n            puzzleModel[b] = t;\r\n        }\r\n    }\r\n    /** (x, y) 좌표의 행렬 위치를 얻는다. */\r\n    getRowColAt(x, y) {\r\n        return Object(_utils__WEBPACK_IMPORTED_MODULE_2__[\"getRowCol\"])(x, y, this.boardSize, this.left, this.top, this.countDimension, this.flipH, this.flipV);\r\n    }\r\n    /** 현재 행렬 위치에 있는 퍼즐 조각을 얻는다. */\r\n    getPieceAt(row, col) {\r\n        let foundPosition = col + row * this.countDimension;\r\n        let foundTag = this.puzzleModel[foundPosition];\r\n        return this.pieces[foundTag];\r\n    }\r\n    /** index번째 행벡터/열벡터를 얻는다. */\r\n    getVector(index, orient) {\r\n        let ar = new Array(this.countDimension);\r\n        let start, increment;\r\n        switch (orient) {\r\n            case \"row\":\r\n                start = index * this.countDimension;\r\n                increment = 1;\r\n                break;\r\n            case \"col\":\r\n                start = index;\r\n                increment = this.countDimension;\r\n                break;\r\n        }\r\n        for (let i = 0; i < this.countDimension; i++) {\r\n            ar[i] = this.pieces[this.puzzleModel[start + increment * i]];\r\n        }\r\n        return ar;\r\n    }\r\n    /** 뷰를 초기화한다. */\r\n    initViewForModel() {\r\n        const totalPieces = this.countDimension * this.countDimension;\r\n        const puzzleModel = this.puzzleModel;\r\n        const pieces = this.pieces;\r\n        const left = this.left;\r\n        const top = this.top;\r\n        const dimension = this.countDimension;\r\n        const boardSize = this.boardSize;\r\n        for (let i = 0; i < totalPieces; i++) {\r\n            const tag = puzzleModel[i];\r\n            let row = Math.floor(i / dimension);\r\n            if (this.flipV)\r\n                row = dimension - row - 1;\r\n            let col = (i % dimension);\r\n            if (this.flipH)\r\n                col = dimension - col - 1;\r\n            pieces[tag].x = left + col * boardSize / dimension;\r\n            pieces[tag].y = top + row * boardSize / dimension;\r\n        }\r\n    }\r\n    /** rAF에 동기화된 마우스 클릭 핸들러 */\r\n    onMousedown() {\r\n        /* 이 메서드는 반드시 input.handleMousedown() 이후에 호출되므로 이 메서드가 시작하는 시점에서는 input의 모든 속성들이 유효값을 가지고 있다. */\r\n        this.grab.onMousedown(this.input, this);\r\n    }\r\n    /** rAF에 동기화된 마우스 놓기 핸들러 */\r\n    onMouseup() {\r\n        this.grab.onMouseup(this.input, this);\r\n    }\r\n    /** 매 rAF마다 호출된다. */\r\n    update() {\r\n        let input = this.input;\r\n        let grab = this.grab;\r\n        input.clock();\r\n        if (this.rAFSyncMousedownMessage) {\r\n            this.onMousedown();\r\n            this.rAFSyncMousedownMessage = false;\r\n        }\r\n        if (grab.piece) {\r\n            grab.update(this);\r\n        }\r\n        if (this.rAFSyncMouseupMessage) {\r\n            this.onMouseup();\r\n            this.rAFSyncMouseupMessage = false;\r\n        }\r\n        for (const piece of this.pieces) {\r\n            piece.update(this);\r\n        }\r\n    }\r\n    /**\r\n     * 주어진 좌표를 클릭했을 때 마우스 드래그/놓기 이벤트를 활성화시킬 것인지 여부\r\n     * accept되지 않으면 **입력 자체가 완전히 무시되어 버린다.**\r\n     */\r\n    acceptCoordinate(x, y) {\r\n        // 퍼즐 밖 영역을 클릭하면 드래그로 이어지지 않는다.\r\n        if (x < this.left || x > this.right || y < this.top || y > this.bottom)\r\n            return false;\r\n        // 움직일 수 없는 조각을 클릳하면 드래그로 이어지지 않는다.\r\n        let [blankRow, blankCol] = this.rowColOfBlank;\r\n        let [row, col] = this.getRowColAt(x, y);\r\n        if ((blankRow == row) == (blankCol == col))\r\n            return false;\r\n        return true;\r\n    }\r\n    render(context) {\r\n        context.clearRect(0, 0, 360, 360);\r\n        for (const piece of this.pieces) {\r\n            piece.render(context);\r\n        }\r\n    }\r\n}\r\n/**\r\n * @TODO 두 개의 역할이 섞여 있음. 재주껏 걸러내시오.\r\n */\r\nclass Grab {\r\n    constructor() {\r\n        /** 마우스 버튼을 누른 행렬 위치 */\r\n        this.row = null;\r\n        this.col = null;\r\n        /** 현재 누른 퍼즐 조각을 나타낸다. */\r\n        this.piece = null;\r\n        /**\r\n         * 현재 누른 퍼즐 조각과 같은 행 또는 열에 있는 조각들의 모음이다.\r\n         * 충돌 테스트는 여기 있는 조각들에 한해서 실행된다.\r\n         */\r\n        this.concern = null;\r\n        /**\r\n         * 현재 누른 퍼즐 조각을 어느 방향으로 움직일 수 있는지 나타낸다.\r\n         * 이 값이 'h'이면 퍼즐 조각을 좌우좌로 움직일 수 있고, 퍼즐 중에서 행(row)이 선택된 것이다.\r\n         * 'v'이면 퍼즐 조각을 세로로 움직일 수 있고, 열(col)이 선택된 것이다.\r\n         */\r\n        this.moveDirection = null;\r\n    }\r\n    /** (rAF-sync) 마우스를 누를 때 실행된다. */\r\n    onMousedown(input, game) {\r\n        // 여기서는 [blankRow, blankCol] != [row, col]이다. 만약 둘이 같다면 이것은 실행조차 되지 않는다.\r\n        let { startX: x, startY: y } = input;\r\n        let [blankRow, blankCol] = game.rowColOfBlank;\r\n        let [row, col] = game.getRowColAt(x, y);\r\n        if (blankRow == row) {\r\n            this.moveDirection = \"h\";\r\n            this.concern = game.getVector(blankRow, \"row\");\r\n        }\r\n        else if (blankCol == col) {\r\n            this.moveDirection = \"v\";\r\n            this.concern = game.getVector(blankCol, \"col\");\r\n        }\r\n        this.row = row;\r\n        this.col = col;\r\n        this.piece = game.getPieceAt(row, col);\r\n    }\r\n    /** (rAF-sync) 마우스를 놓을 때 실행된다. */\r\n    onMouseup(input, game) {\r\n        let isDrag = true;\r\n        if (isDrag) {\r\n            // 퍼즐 조각을 물리적으로 움직인 것이라면 영향을 받은 모든 조각들을 바른 위치에 놓은 후, 모델을 업데이트한다.\r\n            let modelChanges = {};\r\n            for (const piece of this.concern) {\r\n                if (piece.tag == _config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].blankTag)\r\n                    continue;\r\n                // 영향을 받은 모든 퍼즐 조각들의 모델 행렬 위치를 얻는다. \r\n                let [row, col] = piece.whereami(game.left, game.top, game.boardSize, game.countDimension, game.flipH, game.flipV);\r\n                // 모델을 딴다.\r\n                let flattenizedPosition = row * game.countDimension + col;\r\n                modelChanges[flattenizedPosition] = piece.tag;\r\n                // 이제 모델에는 for 루프의 로컬 변수 row, col은 더 이상 필요없다.\r\n                // 실제 좌표에 사용하기 위해 모델 행렬 위치를 다시 반전시킨다.\r\n                if (game.flipH)\r\n                    col = game.countDimension - col - 1;\r\n                if (game.flipV)\r\n                    row = game.countDimension - row - 1;\r\n                let destX = game.left + col * game.pieceSize;\r\n                let destY = game.top + row * game.pieceSize;\r\n                piece.destX = destX;\r\n                piece.destY = destY;\r\n            }\r\n            // 옮기기 이후 모델의 변경점(changes)을 찾는다.\r\n            const start = this.moveDirection == 'h' ? this.row * game.countDimension : this.col;\r\n            const increment = this.moveDirection == 'h' ? 1 : game.countDimension;\r\n            // 빈칸을 찾는다.\r\n            for (let i = 0; i < game.countDimension; i++) {\r\n                let index = start + increment * i;\r\n                if (!(index in modelChanges)) {\r\n                    modelChanges[index] = _config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].blankTag;\r\n                    break;\r\n                }\r\n            }\r\n            for (const index in modelChanges) {\r\n                const tag = modelChanges[index];\r\n                game.puzzleModel[index] = tag;\r\n            }\r\n        }\r\n        this.piece = null;\r\n        this.moveDirection = null;\r\n        this.concern = null;\r\n    }\r\n    /**\r\n     * 마우스를 누르고 있는 때에 한해 업데이트(rAF)가 발생할 때 호출된다. 즉, 실질적 업데이트와 같다.\r\n     */\r\n    update(game) {\r\n        if (this.moveDirection == \"h\" && game.input.beforeX != null) {\r\n            this.piece.push(game.input.moveX, 'h', game, this.concern);\r\n        }\r\n        else if (this.moveDirection == \"v\" && game.input.beforeY != null) {\r\n            this.piece.push(game.input.moveY, 'v', game, this.concern);\r\n        }\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvR2FtZS50cz83NDllIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUE4QjtBQUNGO0FBQ1E7QUFDUjtBQUM1QjtBQUNBLG1DQUFtQywrQ0FBTTtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLGtCQUFrQjtBQUNyQywyQkFBMkIsa0JBQWtCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNlO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDhDQUFLO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsbUJBQW1CO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsOENBQUs7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QywrQ0FBTTtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QiwrQ0FBTTtBQUMvQjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx3REFBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIseUJBQXlCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGlCQUFpQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLHVCQUF1QjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsK0NBQU07QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHlCQUF5QjtBQUNwRDtBQUNBO0FBQ0EsMENBQTBDLCtDQUFNO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiIuL3NyYy9HYW1lLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbmZpZyBmcm9tIFwiLi9jb25maWdcIjtcclxuaW1wb3J0IFBpZWNlIGZyb20gXCIuL1BpZWNlXCI7XHJcbmltcG9ydCB7IGdldFJvd0NvbCB9IGZyb20gXCIuL3V0aWxzXCI7XHJcbmltcG9ydCBJbnB1dCBmcm9tIFwiLi9JbnB1dFwiO1xyXG5mdW5jdGlvbiBpc1NvbHZhYmxlKG1vZGVsKSB7XHJcbiAgICBsZXQgYmxhbmtJbmRleCA9IG1vZGVsLmluZGV4T2YoY29uZmlnLmJsYW5rVGFnKTtcclxuICAgIGxldCBjb3VudERpbWVuc2lvbiA9IE1hdGguc3FydChtb2RlbC5sZW5ndGgpO1xyXG4gICAgbGV0IGJsYW5rUm93ID0gTWF0aC5mbG9vcihibGFua0luZGV4IC8gY291bnREaW1lbnNpb24pO1xyXG4gICAgbGV0IGJsYW5rQ29sID0gYmxhbmtJbmRleCAlIGNvdW50RGltZW5zaW9uO1xyXG4gICAgbGV0IHBhcml0eSA9IChibGFua1JvdyArIGJsYW5rQ29sKSAlIDI7XHJcbiAgICBsZXQgaW52ZXJzaW9uID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbW9kZWwubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBmb3IgKGxldCBqID0gaSArIDE7IGogPCBtb2RlbC5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICBpZiAobW9kZWxbaV0gPiBtb2RlbFtqXSlcclxuICAgICAgICAgICAgICAgIGludmVyc2lvbisrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBpbnZlcnNpb24gJSAyID09IHBhcml0eTtcclxufVxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvdW50RGltZW5zaW9uLCBwdXp6bGVTZXQsIGxlZnQsIHRvcCwgYm9hcmRTaXplKSB7XHJcbiAgICAgICAgLyoqIOyijOyasOuwmOyghCAqL1xyXG4gICAgICAgIHRoaXMuZmxpcEggPSBmYWxzZTtcclxuICAgICAgICAvKiog7IOB7ZWY67CY7KCEICovXHJcbiAgICAgICAgdGhpcy5mbGlwViA9IGZhbHNlO1xyXG4gICAgICAgIC8qKiDsnoXroKfsnYQg7LKY66as7ZWY64qUIOy7tO2PrOuEjO2KuCAqL1xyXG4gICAgICAgIHRoaXMuaW5wdXQgPSBuZXcgSW5wdXQoKTtcclxuICAgICAgICAvKiog7Y287KaQIOyhsOqwgeydmCDsm4Dsp4HsnoTsnYQg7Luo7Yq466Gk7ZWY64qUIOy7tO2PrOuEjO2KuCAqL1xyXG4gICAgICAgIHRoaXMuZ3JhYiA9IG5ldyBHcmFiKCk7XHJcbiAgICAgICAgLyoqIHJBRuyXkCDrj5nquLDtmZTrkJwg7J2067Kk7Yq4IO2VuOuTpCDtlIzrnpjqt7ggKi9cclxuICAgICAgICB0aGlzLnJBRlN5bmNNb3VzZWRvd25NZXNzYWdlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5yQUZTeW5jTW91c2V1cE1lc3NhZ2UgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmxlZnQgPSBsZWZ0O1xyXG4gICAgICAgIHRoaXMudG9wID0gdG9wO1xyXG4gICAgICAgIHRoaXMuYm9hcmRTaXplID0gYm9hcmRTaXplO1xyXG4gICAgICAgIHRoaXMuY291bnREaW1lbnNpb24gPSBjb3VudERpbWVuc2lvbjtcclxuICAgICAgICB0aGlzLnNvbHZhYmxlID0gcHV6emxlU2V0LnNvbHZhYmxlO1xyXG4gICAgICAgIGNvbnN0IHRvdGFsUGllY2VzID0gY291bnREaW1lbnNpb24gKiBjb3VudERpbWVuc2lvbjtcclxuICAgICAgICBjb25zdCBwdXp6bGVTZXREaW1lbnNpb24gPSBwdXp6bGVTZXQuZGltZW5zaW9uIC8gY291bnREaW1lbnNpb247XHJcbiAgICAgICAgdGhpcy5wdXp6bGVNb2RlbCA9IG5ldyBBcnJheSh0b3RhbFBpZWNlcyk7XHJcbiAgICAgICAgdGhpcy5waWVjZXMgPSBuZXcgQXJyYXkodG90YWxQaWVjZXMpO1xyXG4gICAgICAgIGZvciAobGV0IHRhZyA9IDA7IHRhZyA8IHRvdGFsUGllY2VzOyB0YWcrKykge1xyXG4gICAgICAgICAgICBsZXQgdnJvdyA9IE1hdGguZmxvb3IodGFnIC8gY291bnREaW1lbnNpb24pO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5mbGlwVilcclxuICAgICAgICAgICAgICAgIHZyb3cgPSBjb3VudERpbWVuc2lvbiAtIHZyb3cgLSAxO1xyXG4gICAgICAgICAgICBsZXQgdmNvbCA9IHRhZyAlIGNvdW50RGltZW5zaW9uO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5mbGlwSClcclxuICAgICAgICAgICAgICAgIHZjb2wgPSBjb3VudERpbWVuc2lvbiAtIHZjb2wgLSAxO1xyXG4gICAgICAgICAgICB0aGlzLnB1enpsZU1vZGVsW3RhZ10gPSB0YWc7XHJcbiAgICAgICAgICAgIGxldCBbeCwgeV0gPSBwdXp6bGVTZXQuZ2V0UG9zaXRpb24odnJvdywgdmNvbCwgY291bnREaW1lbnNpb24pO1xyXG4gICAgICAgICAgICB0aGlzLnBpZWNlc1t0YWddID0gbmV3IFBpZWNlKHRhZywgcHV6emxlU2V0LnRleHR1cmUsIHgsIHksIHB1enpsZVNldERpbWVuc2lvbiwgYm9hcmRTaXplIC8gY291bnREaW1lbnNpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmluaXRWaWV3Rm9yTW9kZWwoKTtcclxuICAgIH1cclxuICAgIC8qKiDsupTrsoTsiqTsl5DshJwg7Y287KaQ7J2YIOyYpOuluOyqvSDrgZ0g7JyE7LmYICovXHJcbiAgICBnZXQgcmlnaHQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubGVmdCArIHRoaXMuYm9hcmRTaXplO1xyXG4gICAgfVxyXG4gICAgLyoqIOy6lOuyhOyKpOyXkOyEnCDtjbzsppDsnZgg7JWE656Y7Kq9IOuBnSDsnITsuZggKi9cclxuICAgIGdldCBib3R0b20oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudG9wICsgdGhpcy5ib2FyZFNpemU7XHJcbiAgICB9XHJcbiAgICAvKiog7Y287KaQIOyhsOqwgSDtlZjrgpjsnZgg67OA7J2YIOq4uOydtCAqL1xyXG4gICAgZ2V0IHBpZWNlU2l6ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ib2FyZFNpemUgLyB0aGlzLmNvdW50RGltZW5zaW9uO1xyXG4gICAgfVxyXG4gICAgLyoqIO2YhOyerCDruYgg7Lm47J2YIO2WieugrCDsnITsuZggKi9cclxuICAgIGdldCByb3dDb2xPZkJsYW5rKCkge1xyXG4gICAgICAgIGxldCBpID0gdGhpcy5wdXp6bGVNb2RlbC5pbmRleE9mKGNvbmZpZy5ibGFua1RhZyk7XHJcbiAgICAgICAgcmV0dXJuIFtNYXRoLmZsb29yKGkgLyB0aGlzLmNvdW50RGltZW5zaW9uKSwgaSAlIHRoaXMuY291bnREaW1lbnNpb25dO1xyXG4gICAgfVxyXG4gICAgLyoqIO2NvOymkOydhCDshJ7ripTri6QuIEdhbWUg64K07JeQIOyeiOuKlCBzb2x2YWJsZSDsho3shLHsnbQg7KCB7Jqp65Cc64ukLiAqL1xyXG4gICAgc2h1ZmZsZSgpIHtcclxuICAgICAgICBjb25zdCB0b3RhbFBpZWNlcyA9IHRoaXMuY291bnREaW1lbnNpb24gKiB0aGlzLmNvdW50RGltZW5zaW9uO1xyXG4gICAgICAgIGNvbnN0IHB1enpsZU1vZGVsID0gdGhpcy5wdXp6bGVNb2RlbDtcclxuICAgICAgICBjb25zdCBzZWxlY3RSZWFsUGllY2UgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGRvIHtcclxuICAgICAgICAgICAgICAgIGxldCBpID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdG90YWxQaWVjZXMpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHYgPSBwdXp6bGVNb2RlbFtpXTtcclxuICAgICAgICAgICAgICAgIGlmICh2ICE9IGNvbmZpZy5ibGFua1RhZylcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTtcclxuICAgICAgICAgICAgfSB3aGlsZSAodHJ1ZSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBwdXp6bGVNb2RlbC5zb3J0KCgpID0+IDAuNSAtIE1hdGgucmFuZG9tKCkpO1xyXG4gICAgICAgIGlmIChpc1NvbHZhYmxlKHB1enpsZU1vZGVsKSAhPSB0aGlzLnNvbHZhYmxlKSB7XHJcbiAgICAgICAgICAgIGxldCBhID0gc2VsZWN0UmVhbFBpZWNlKCk7XHJcbiAgICAgICAgICAgIGxldCBiID0gc2VsZWN0UmVhbFBpZWNlKCk7XHJcbiAgICAgICAgICAgIHdoaWxlIChhID09IGIpXHJcbiAgICAgICAgICAgICAgICBiID0gc2VsZWN0UmVhbFBpZWNlKCk7XHJcbiAgICAgICAgICAgIGxldCB0ID0gcHV6emxlTW9kZWxbYV07XHJcbiAgICAgICAgICAgIHB1enpsZU1vZGVsW2FdID0gcHV6emxlTW9kZWxbYl07XHJcbiAgICAgICAgICAgIHB1enpsZU1vZGVsW2JdID0gdDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiogKHgsIHkpIOyijO2RnOydmCDtlonroKwg7JyE7LmY66W8IOyWu+uKlOuLpC4gKi9cclxuICAgIGdldFJvd0NvbEF0KHgsIHkpIHtcclxuICAgICAgICByZXR1cm4gZ2V0Um93Q29sKHgsIHksIHRoaXMuYm9hcmRTaXplLCB0aGlzLmxlZnQsIHRoaXMudG9wLCB0aGlzLmNvdW50RGltZW5zaW9uLCB0aGlzLmZsaXBILCB0aGlzLmZsaXBWKTtcclxuICAgIH1cclxuICAgIC8qKiDtmITsnqwg7ZaJ66CsIOychOy5mOyXkCDsnojripQg7Y287KaQIOyhsOqwgeydhCDslrvripTri6QuICovXHJcbiAgICBnZXRQaWVjZUF0KHJvdywgY29sKSB7XHJcbiAgICAgICAgbGV0IGZvdW5kUG9zaXRpb24gPSBjb2wgKyByb3cgKiB0aGlzLmNvdW50RGltZW5zaW9uO1xyXG4gICAgICAgIGxldCBmb3VuZFRhZyA9IHRoaXMucHV6emxlTW9kZWxbZm91bmRQb3NpdGlvbl07XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGllY2VzW2ZvdW5kVGFnXTtcclxuICAgIH1cclxuICAgIC8qKiBpbmRleOuyiOynuCDtlonrsqHthLAv7Je067Kh7YSw66W8IOyWu+uKlOuLpC4gKi9cclxuICAgIGdldFZlY3RvcihpbmRleCwgb3JpZW50KSB7XHJcbiAgICAgICAgbGV0IGFyID0gbmV3IEFycmF5KHRoaXMuY291bnREaW1lbnNpb24pO1xyXG4gICAgICAgIGxldCBzdGFydCwgaW5jcmVtZW50O1xyXG4gICAgICAgIHN3aXRjaCAob3JpZW50KSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJyb3dcIjpcclxuICAgICAgICAgICAgICAgIHN0YXJ0ID0gaW5kZXggKiB0aGlzLmNvdW50RGltZW5zaW9uO1xyXG4gICAgICAgICAgICAgICAgaW5jcmVtZW50ID0gMTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiY29sXCI6XHJcbiAgICAgICAgICAgICAgICBzdGFydCA9IGluZGV4O1xyXG4gICAgICAgICAgICAgICAgaW5jcmVtZW50ID0gdGhpcy5jb3VudERpbWVuc2lvbjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY291bnREaW1lbnNpb247IGkrKykge1xyXG4gICAgICAgICAgICBhcltpXSA9IHRoaXMucGllY2VzW3RoaXMucHV6emxlTW9kZWxbc3RhcnQgKyBpbmNyZW1lbnQgKiBpXV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhcjtcclxuICAgIH1cclxuICAgIC8qKiDrt7Drpbwg7LSI6riw7ZmU7ZWc64ukLiAqL1xyXG4gICAgaW5pdFZpZXdGb3JNb2RlbCgpIHtcclxuICAgICAgICBjb25zdCB0b3RhbFBpZWNlcyA9IHRoaXMuY291bnREaW1lbnNpb24gKiB0aGlzLmNvdW50RGltZW5zaW9uO1xyXG4gICAgICAgIGNvbnN0IHB1enpsZU1vZGVsID0gdGhpcy5wdXp6bGVNb2RlbDtcclxuICAgICAgICBjb25zdCBwaWVjZXMgPSB0aGlzLnBpZWNlcztcclxuICAgICAgICBjb25zdCBsZWZ0ID0gdGhpcy5sZWZ0O1xyXG4gICAgICAgIGNvbnN0IHRvcCA9IHRoaXMudG9wO1xyXG4gICAgICAgIGNvbnN0IGRpbWVuc2lvbiA9IHRoaXMuY291bnREaW1lbnNpb247XHJcbiAgICAgICAgY29uc3QgYm9hcmRTaXplID0gdGhpcy5ib2FyZFNpemU7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3RhbFBpZWNlczsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhZyA9IHB1enpsZU1vZGVsW2ldO1xyXG4gICAgICAgICAgICBsZXQgcm93ID0gTWF0aC5mbG9vcihpIC8gZGltZW5zaW9uKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZmxpcFYpXHJcbiAgICAgICAgICAgICAgICByb3cgPSBkaW1lbnNpb24gLSByb3cgLSAxO1xyXG4gICAgICAgICAgICBsZXQgY29sID0gKGkgJSBkaW1lbnNpb24pO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5mbGlwSClcclxuICAgICAgICAgICAgICAgIGNvbCA9IGRpbWVuc2lvbiAtIGNvbCAtIDE7XHJcbiAgICAgICAgICAgIHBpZWNlc1t0YWddLnggPSBsZWZ0ICsgY29sICogYm9hcmRTaXplIC8gZGltZW5zaW9uO1xyXG4gICAgICAgICAgICBwaWVjZXNbdGFnXS55ID0gdG9wICsgcm93ICogYm9hcmRTaXplIC8gZGltZW5zaW9uO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiByQUbsl5Ag64+Z6riw7ZmU65CcIOuniOyasOyKpCDtgbTrpq0g7ZW465Ok65+sICovXHJcbiAgICBvbk1vdXNlZG93bigpIHtcclxuICAgICAgICAvKiDsnbQg66mU7ISc65Oc64qUIOuwmOuTnOyLnCBpbnB1dC5oYW5kbGVNb3VzZWRvd24oKSDsnbTtm4Tsl5Ag7Zi47Lac65CY66+A66GcIOydtCDrqZTshJzrk5zqsIAg7Iuc7J6R7ZWY64qUIOyLnOygkOyXkOyEnOuKlCBpbnB1dOydmCDrqqjrk6Ag7IaN7ISx65Ok7J20IOycoO2aqOqwkuydhCDqsIDsp4Dqs6Ag7J6I64ukLiAqL1xyXG4gICAgICAgIHRoaXMuZ3JhYi5vbk1vdXNlZG93bih0aGlzLmlucHV0LCB0aGlzKTtcclxuICAgIH1cclxuICAgIC8qKiByQUbsl5Ag64+Z6riw7ZmU65CcIOuniOyasOyKpCDrhpPquLAg7ZW465Ok65+sICovXHJcbiAgICBvbk1vdXNldXAoKSB7XHJcbiAgICAgICAgdGhpcy5ncmFiLm9uTW91c2V1cCh0aGlzLmlucHV0LCB0aGlzKTtcclxuICAgIH1cclxuICAgIC8qKiDrp6QgckFG66eI64ukIO2YuOy2nOuQnOuLpC4gKi9cclxuICAgIHVwZGF0ZSgpIHtcclxuICAgICAgICBsZXQgaW5wdXQgPSB0aGlzLmlucHV0O1xyXG4gICAgICAgIGxldCBncmFiID0gdGhpcy5ncmFiO1xyXG4gICAgICAgIGlucHV0LmNsb2NrKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuckFGU3luY01vdXNlZG93bk1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgdGhpcy5vbk1vdXNlZG93bigpO1xyXG4gICAgICAgICAgICB0aGlzLnJBRlN5bmNNb3VzZWRvd25NZXNzYWdlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChncmFiLnBpZWNlKSB7XHJcbiAgICAgICAgICAgIGdyYWIudXBkYXRlKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5yQUZTeW5jTW91c2V1cE1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgdGhpcy5vbk1vdXNldXAoKTtcclxuICAgICAgICAgICAgdGhpcy5yQUZTeW5jTW91c2V1cE1lc3NhZ2UgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChjb25zdCBwaWVjZSBvZiB0aGlzLnBpZWNlcykge1xyXG4gICAgICAgICAgICBwaWVjZS51cGRhdGUodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDso7zslrTsp4Qg7KKM7ZGc66W8IO2BtOumre2WiOydhCDrlYwg66eI7Jqw7IqkIOuTnOuemOq3uC/rhpPquLAg7J2067Kk7Yq466W8IO2ZnOyEse2ZlOyLnO2CrCDqsoPsnbjsp4Ag7Jes67aAXHJcbiAgICAgKiBhY2NlcHTrkJjsp4Ag7JWK7Jy866m0ICoq7J6F66ClIOyekOyytOqwgCDsmYTsoITtnogg66y07Iuc65CY7Ja0IOuyhOumsOuLpC4qKlxyXG4gICAgICovXHJcbiAgICBhY2NlcHRDb29yZGluYXRlKHgsIHkpIHtcclxuICAgICAgICAvLyDtjbzsppAg67CWIOyYgeyXreydhCDtgbTrpq3tlZjrqbQg65Oc656Y6re466GcIOydtOyWtOyngOyngCDslYrripTri6QuXHJcbiAgICAgICAgaWYgKHggPCB0aGlzLmxlZnQgfHwgeCA+IHRoaXMucmlnaHQgfHwgeSA8IHRoaXMudG9wIHx8IHkgPiB0aGlzLmJvdHRvbSlcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIC8vIOybgOyngeydvCDsiJgg7JeG64qUIOyhsOqwgeydhCDtgbTrprPtlZjrqbQg65Oc656Y6re466GcIOydtOyWtOyngOyngCDslYrripTri6QuXHJcbiAgICAgICAgbGV0IFtibGFua1JvdywgYmxhbmtDb2xdID0gdGhpcy5yb3dDb2xPZkJsYW5rO1xyXG4gICAgICAgIGxldCBbcm93LCBjb2xdID0gdGhpcy5nZXRSb3dDb2xBdCh4LCB5KTtcclxuICAgICAgICBpZiAoKGJsYW5rUm93ID09IHJvdykgPT0gKGJsYW5rQ29sID09IGNvbCkpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIHJlbmRlcihjb250ZXh0KSB7XHJcbiAgICAgICAgY29udGV4dC5jbGVhclJlY3QoMCwgMCwgMzYwLCAzNjApO1xyXG4gICAgICAgIGZvciAoY29uc3QgcGllY2Ugb2YgdGhpcy5waWVjZXMpIHtcclxuICAgICAgICAgICAgcGllY2UucmVuZGVyKGNvbnRleHQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4vKipcclxuICogQFRPRE8g65GQIOqwnOydmCDsl63tlaDsnbQg7ISe7JesIOyeiOydjC4g7J6s7KO86ruPIOqxuOufrOuCtOyLnOyYpC5cclxuICovXHJcbmNsYXNzIEdyYWIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgLyoqIOuniOyasOyKpCDrsoTtirzsnYQg64iE66W4IO2WieugrCDsnITsuZggKi9cclxuICAgICAgICB0aGlzLnJvdyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jb2wgPSBudWxsO1xyXG4gICAgICAgIC8qKiDtmITsnqwg64iE66W4IO2NvOymkCDsobDqsIHsnYQg64KY7YOA64K464ukLiAqL1xyXG4gICAgICAgIHRoaXMucGllY2UgPSBudWxsO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIO2YhOyerCDriITrpbgg7Y287KaQIOyhsOqwgeqzvCDqsJnsnYAg7ZaJIOuYkOuKlCDsl7Tsl5Ag7J6I64qUIOyhsOqwgeuTpOydmCDrqqjsnYzsnbTri6QuXHJcbiAgICAgICAgICog7Lap64+MIO2FjOyKpO2KuOuKlCDsl6zquLAg7J6I64qUIOyhsOqwgeuTpOyXkCDtlZztlbTshJwg7Iuk7ZaJ65Cc64ukLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuY29uY2VybiA9IG51bGw7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog7ZiE7J6sIOuIhOuluCDtjbzsppAg7KGw6rCB7J2EIOyWtOuKkCDrsKntlqXsnLzroZwg7JuA7KeB7J28IOyImCDsnojripTsp4Ag64KY7YOA64K464ukLlxyXG4gICAgICAgICAqIOydtCDqsJLsnbQgJ2gn7J2066m0IO2NvOymkCDsobDqsIHsnYQg7KKM7Jqw7KKM66GcIOybgOyngeydvCDsiJgg7J6I6rOgLCDtjbzsppAg7KSR7JeQ7IScIO2WiShyb3cp7J20IOyEoO2DneuQnCDqsoPsnbTri6QuXHJcbiAgICAgICAgICogJ3Yn7J2066m0IO2NvOymkCDsobDqsIHsnYQg7IS466Gc66GcIOybgOyngeydvCDsiJgg7J6I6rOgLCDsl7QoY29sKeydtCDshKDtg53rkJwg6rKD7J2064ukLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMubW92ZURpcmVjdGlvbiA9IG51bGw7XHJcbiAgICB9XHJcbiAgICAvKiogKHJBRi1zeW5jKSDrp4jsmrDsiqTrpbwg64iE66W8IOuVjCDsi6TtlonrkJzri6QuICovXHJcbiAgICBvbk1vdXNlZG93bihpbnB1dCwgZ2FtZSkge1xyXG4gICAgICAgIC8vIOyXrOq4sOyEnOuKlCBbYmxhbmtSb3csIGJsYW5rQ29sXSAhPSBbcm93LCBjb2xd7J2064ukLiDrp4zslb0g65GY7J20IOqwmeuLpOuptCDsnbTqsoPsnYAg7Iuk7ZaJ7KGw7LCoIOuQmOyngCDslYrripTri6QuXHJcbiAgICAgICAgbGV0IHsgc3RhcnRYOiB4LCBzdGFydFk6IHkgfSA9IGlucHV0O1xyXG4gICAgICAgIGxldCBbYmxhbmtSb3csIGJsYW5rQ29sXSA9IGdhbWUucm93Q29sT2ZCbGFuaztcclxuICAgICAgICBsZXQgW3JvdywgY29sXSA9IGdhbWUuZ2V0Um93Q29sQXQoeCwgeSk7XHJcbiAgICAgICAgaWYgKGJsYW5rUm93ID09IHJvdykge1xyXG4gICAgICAgICAgICB0aGlzLm1vdmVEaXJlY3Rpb24gPSBcImhcIjtcclxuICAgICAgICAgICAgdGhpcy5jb25jZXJuID0gZ2FtZS5nZXRWZWN0b3IoYmxhbmtSb3csIFwicm93XCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChibGFua0NvbCA9PSBjb2wpIHtcclxuICAgICAgICAgICAgdGhpcy5tb3ZlRGlyZWN0aW9uID0gXCJ2XCI7XHJcbiAgICAgICAgICAgIHRoaXMuY29uY2VybiA9IGdhbWUuZ2V0VmVjdG9yKGJsYW5rQ29sLCBcImNvbFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yb3cgPSByb3c7XHJcbiAgICAgICAgdGhpcy5jb2wgPSBjb2w7XHJcbiAgICAgICAgdGhpcy5waWVjZSA9IGdhbWUuZ2V0UGllY2VBdChyb3csIGNvbCk7XHJcbiAgICB9XHJcbiAgICAvKiogKHJBRi1zeW5jKSDrp4jsmrDsiqTrpbwg64aT7J2EIOuVjCDsi6TtlonrkJzri6QuICovXHJcbiAgICBvbk1vdXNldXAoaW5wdXQsIGdhbWUpIHtcclxuICAgICAgICBsZXQgaXNEcmFnID0gdHJ1ZTtcclxuICAgICAgICBpZiAoaXNEcmFnKSB7XHJcbiAgICAgICAgICAgIC8vIO2NvOymkCDsobDqsIHsnYQg66y866as7KCB7Jy866GcIOybgOyngeyduCDqsoPsnbTrnbzrqbQg7JiB7Zal7J2EIOuwm+ydgCDrqqjrk6Ag7KGw6rCB65Ok7J2EIOuwlOuluCDsnITsuZjsl5Ag64aT7J2AIO2bhCwg66qo64247J2EIOyXheuNsOydtO2KuO2VnOuLpC5cclxuICAgICAgICAgICAgbGV0IG1vZGVsQ2hhbmdlcyA9IHt9O1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBpZWNlIG9mIHRoaXMuY29uY2Vybikge1xyXG4gICAgICAgICAgICAgICAgaWYgKHBpZWNlLnRhZyA9PSBjb25maWcuYmxhbmtUYWcpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAvLyDsmIHtlqXsnYQg67Cb7J2AIOuqqOuToCDtjbzsppAg7KGw6rCB65Ok7J2YIOuqqOuNuCDtlonroKwg7JyE7LmY66W8IOyWu+uKlOuLpC4gXHJcbiAgICAgICAgICAgICAgICBsZXQgW3JvdywgY29sXSA9IHBpZWNlLndoZXJlYW1pKGdhbWUubGVmdCwgZ2FtZS50b3AsIGdhbWUuYm9hcmRTaXplLCBnYW1lLmNvdW50RGltZW5zaW9uLCBnYW1lLmZsaXBILCBnYW1lLmZsaXBWKTtcclxuICAgICAgICAgICAgICAgIC8vIOuqqOuNuOydhCDrlLTri6QuXHJcbiAgICAgICAgICAgICAgICBsZXQgZmxhdHRlbml6ZWRQb3NpdGlvbiA9IHJvdyAqIGdhbWUuY291bnREaW1lbnNpb24gKyBjb2w7XHJcbiAgICAgICAgICAgICAgICBtb2RlbENoYW5nZXNbZmxhdHRlbml6ZWRQb3NpdGlvbl0gPSBwaWVjZS50YWc7XHJcbiAgICAgICAgICAgICAgICAvLyDsnbTsoJwg66qo64247JeQ64qUIGZvciDro6jtlITsnZgg66Gc7LusIOuzgOyImCByb3csIGNvbOydgCDrjZQg7J207IOBIO2VhOyalOyXhuuLpC5cclxuICAgICAgICAgICAgICAgIC8vIOyLpOygnCDsooztkZzsl5Ag7IKs7Jqp7ZWY6riwIOychO2VtCDrqqjrjbgg7ZaJ66CsIOychOy5mOulvCDri6Tsi5wg67CY7KCE7Iuc7YKo64ukLlxyXG4gICAgICAgICAgICAgICAgaWYgKGdhbWUuZmxpcEgpXHJcbiAgICAgICAgICAgICAgICAgICAgY29sID0gZ2FtZS5jb3VudERpbWVuc2lvbiAtIGNvbCAtIDE7XHJcbiAgICAgICAgICAgICAgICBpZiAoZ2FtZS5mbGlwVilcclxuICAgICAgICAgICAgICAgICAgICByb3cgPSBnYW1lLmNvdW50RGltZW5zaW9uIC0gcm93IC0gMTtcclxuICAgICAgICAgICAgICAgIGxldCBkZXN0WCA9IGdhbWUubGVmdCArIGNvbCAqIGdhbWUucGllY2VTaXplO1xyXG4gICAgICAgICAgICAgICAgbGV0IGRlc3RZID0gZ2FtZS50b3AgKyByb3cgKiBnYW1lLnBpZWNlU2l6ZTtcclxuICAgICAgICAgICAgICAgIHBpZWNlLmRlc3RYID0gZGVzdFg7XHJcbiAgICAgICAgICAgICAgICBwaWVjZS5kZXN0WSA9IGRlc3RZO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIOyYruq4sOq4sCDsnbTtm4Qg66qo64247J2YIOuzgOqyveygkChjaGFuZ2VzKeydhCDssL7ripTri6QuXHJcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5tb3ZlRGlyZWN0aW9uID09ICdoJyA/IHRoaXMucm93ICogZ2FtZS5jb3VudERpbWVuc2lvbiA6IHRoaXMuY29sO1xyXG4gICAgICAgICAgICBjb25zdCBpbmNyZW1lbnQgPSB0aGlzLm1vdmVEaXJlY3Rpb24gPT0gJ2gnID8gMSA6IGdhbWUuY291bnREaW1lbnNpb247XHJcbiAgICAgICAgICAgIC8vIOu5iOy5uOydhCDssL7ripTri6QuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ2FtZS5jb3VudERpbWVuc2lvbjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSBzdGFydCArIGluY3JlbWVudCAqIGk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIShpbmRleCBpbiBtb2RlbENoYW5nZXMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kZWxDaGFuZ2VzW2luZGV4XSA9IGNvbmZpZy5ibGFua1RhZztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGluZGV4IGluIG1vZGVsQ2hhbmdlcykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGFnID0gbW9kZWxDaGFuZ2VzW2luZGV4XTtcclxuICAgICAgICAgICAgICAgIGdhbWUucHV6emxlTW9kZWxbaW5kZXhdID0gdGFnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucGllY2UgPSBudWxsO1xyXG4gICAgICAgIHRoaXMubW92ZURpcmVjdGlvbiA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jb25jZXJuID0gbnVsbDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog66eI7Jqw7Iqk66W8IOuIhOultOqzoCDsnojripQg65WM7JeQIO2VnO2VtCDsl4XrjbDsnbTtirgockFGKeqwgCDrsJzsg53tlaAg65WMIO2YuOy2nOuQnOuLpC4g7KaJLCDsi6Tsp4jsoIEg7JeF642w7J207Yq47JmAIOqwmeuLpC5cclxuICAgICAqL1xyXG4gICAgdXBkYXRlKGdhbWUpIHtcclxuICAgICAgICBpZiAodGhpcy5tb3ZlRGlyZWN0aW9uID09IFwiaFwiICYmIGdhbWUuaW5wdXQuYmVmb3JlWCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGllY2UucHVzaChnYW1lLmlucHV0Lm1vdmVYLCAnaCcsIGdhbWUsIHRoaXMuY29uY2Vybik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMubW92ZURpcmVjdGlvbiA9PSBcInZcIiAmJiBnYW1lLmlucHV0LmJlZm9yZVkgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLnBpZWNlLnB1c2goZ2FtZS5pbnB1dC5tb3ZlWSwgJ3YnLCBnYW1lLCB0aGlzLmNvbmNlcm4pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/Game.ts\n");

/***/ }),

/***/ "./src/Input.ts":
/*!**********************!*\
  !*** ./src/Input.ts ***!
  \**********************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Input; });\n/**\r\n * DOM 이벤트를 이용하여 마우스 입력을 받아들이는 컴포넌트\r\n * 이벤트 루프가 rAF보다 훨씬 빈번하게 일어나므로 입력값을 rAF-synchronize시키는 기능도 있다.\r\n */\r\nclass Input {\r\n    constructor() {\r\n        /**\r\n         * EventListener로 받아들인 임시 마우스 위치 (또는 퍼즐 위치)\r\n         * Listener가 마우스 좌표를 받아들이면 퍼즐 조각에 바로 반영하지 않고, requestAnimationFrame이 돌아올 때까지 기다린다. (이벤트 핸들링이 rAF보다 훨씬 많이 발생한다.)\r\n         * 따라서 쏟아지는 이벤트로 인해 불필요하게 성능이 저하되는 것을 방지한다.\r\n         * 어떤 이벤트 루프에서 rAF가 발생하지 않으면 해당 루프로 받아들인 좌표는 버려지게 된다.\r\n         * */\r\n        this.inputX = null;\r\n        this.inputY = null;\r\n        /** (private) 마지막 update(rAF)가 발생하기 직전의 마우스 위치 */\r\n        this._beforeX = null;\r\n        this._beforeY = null;\r\n        /** (private) update(rAF) 간의 beforeX, beforeY의 변화량 */\r\n        this._moveX = null;\r\n        this._moveY = null;\r\n        /** 마우스 버튼을 누른 위치와 시각 */\r\n        this.startX = null;\r\n        this.startY = null;\r\n        this.startTime = null;\r\n        /** 마우스 버튼을 놓은 위치와 시각 */\r\n        this.endX = null;\r\n        this.endY = null;\r\n        this.endTime = null;\r\n    }\r\n    /** 마지막 update(rAF)가 발생하기 직전의 마우스 위치 */\r\n    get beforeX() { return this._beforeX; }\r\n    get beforeY() { return this._beforeY; }\r\n    /** update(rAF) 간의 beforeX, beforeY의 변화량 */\r\n    get moveX() { return this._moveX; }\r\n    get moveY() { return this._moveY; }\r\n    connect(canvas, game) {\r\n        this.mousemove = ev => {\r\n            this.handleMousemove(ev.offsetX, ev.offsetY, game);\r\n        };\r\n        this.mouseup = ev => {\r\n            this.handleMouseup(ev.offsetX, ev.offsetY, ev.timeStamp, game);\r\n            canvas.removeEventListener('mousemove', this.mousemove);\r\n            document.removeEventListener('mouseup', this.mouseup);\r\n            game.rAFSyncMouseupMessage = true;\r\n        };\r\n        this.mousedown = ev => {\r\n            if (game.acceptCoordinate(ev.offsetX, ev.offsetY)) {\r\n                this.handleMousedown(ev.offsetX, ev.offsetY, ev.timeStamp, game);\r\n                canvas.addEventListener('mousemove', this.mousemove);\r\n                document.addEventListener('mouseup', this.mouseup);\r\n            }\r\n        };\r\n        canvas.addEventListener('mousedown', this.mousedown);\r\n    }\r\n    disconnect(canvas) {\r\n        if (this.mousedown) {\r\n            canvas.removeEventListener('mousedown', this.mousedown);\r\n            this.mousedown = null;\r\n        }\r\n        if (this.mousemove) {\r\n            canvas.removeEventListener('mousemove', this.mousemove);\r\n            this.mousemove = null;\r\n        }\r\n        if (this.mouseup) {\r\n            document.removeEventListener('mouseup', this.mouseup);\r\n            this.mouseup = null;\r\n        }\r\n    }\r\n    handleMousedown(x, y, t, game) {\r\n        this.startX = x;\r\n        this.startY = y;\r\n        this.startTime = t;\r\n        this.endX = null;\r\n        this.endY = null;\r\n        this.endTime = null;\r\n        this._beforeX = null;\r\n        this._beforeY = null;\r\n        this.inputX = null;\r\n        this.inputY = null;\r\n        this._moveX = null;\r\n        this._moveY = null;\r\n        game.rAFSyncMousedownMessage = true;\r\n    }\r\n    handleMousemove(x, y, game) {\r\n        this.inputX = x;\r\n        this.inputY = y;\r\n    }\r\n    handleMouseup(x, y, t, game) {\r\n        this.endX = x;\r\n        this.endY = y;\r\n        this.endTime = t;\r\n        game.rAFSyncMouseupMessage = true;\r\n    }\r\n    /** rAF */\r\n    clock() {\r\n        this._moveX = 0;\r\n        this._moveY = 0;\r\n        if (this._beforeX != null) {\r\n            this._moveX = this.inputX - this._beforeX;\r\n        }\r\n        if (this._beforeY != null) {\r\n            this._moveY = this.inputY - this._beforeY;\r\n        }\r\n        if (this.inputX != null)\r\n            this._beforeX = this.inputX;\r\n        if (this.inputY != null)\r\n            this._beforeY = this.inputY;\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvSW5wdXQudHM/MzUzZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHNCQUFzQjtBQUN6QyxtQkFBbUIsc0JBQXNCO0FBQ3pDO0FBQ0EsaUJBQWlCLG9CQUFvQjtBQUNyQyxpQkFBaUIsb0JBQW9CO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiLi9zcmMvSW5wdXQudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogRE9NIOydtOuypO2KuOulvCDsnbTsmqntlZjsl6wg66eI7Jqw7IqkIOyeheugpeydhCDrsJvslYTrk6TsnbTripQg7Lu07Y+s64SM7Yq4XHJcbiAqIOydtOuypO2KuCDro6jtlITqsIAgckFG67O064ukIO2bqOyUrCDruYjrsojtlZjqsowg7J287Ja064KY66+A66GcIOyeheugpeqwkuydhCByQUYtc3luY2hyb25pemXsi5ztgqTripQg6riw64ql64+EIOyeiOuLpC5cclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIElucHV0IHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEV2ZW50TGlzdGVuZXLroZwg67Cb7JWE65Ok7J24IOyehOyLnCDrp4jsmrDsiqQg7JyE7LmYICjrmJDripQg7Y287KaQIOychOy5mClcclxuICAgICAgICAgKiBMaXN0ZW5lcuqwgCDrp4jsmrDsiqQg7KKM7ZGc66W8IOuwm+yVhOuTpOydtOuptCDtjbzsppAg7KGw6rCB7JeQIOuwlOuhnCDrsJjsmIHtlZjsp4Ag7JWK6rOgLCByZXF1ZXN0QW5pbWF0aW9uRnJhbWXsnbQg64+M7JWE7JisIOuVjOq5jOyngCDquLDri6TrprDri6QuICjsnbTrsqTtirgg7ZW465Ok66eB7J20IHJBRuuztOuLpCDtm6jslKwg66eO7J20IOuwnOyDne2VnOuLpC4pXHJcbiAgICAgICAgICog65Sw65287IScIOyPn+yVhOyngOuKlCDsnbTrsqTtirjroZwg7J247ZW0IOu2iO2VhOyalO2VmOqyjCDshLHriqXsnbQg7KCA7ZWY65CY64qUIOqyg+ydhCDrsKnsp4DtlZzri6QuXHJcbiAgICAgICAgICog7Ja065akIOydtOuypO2KuCDro6jtlITsl5DshJwgckFG6rCAIOuwnOyDne2VmOyngCDslYrsnLzrqbQg7ZW064u5IOujqO2UhOuhnCDrsJvslYTrk6Tsnbgg7KKM7ZGc64qUIOuyhOugpOyngOqyjCDrkJzri6QuXHJcbiAgICAgICAgICogKi9cclxuICAgICAgICB0aGlzLmlucHV0WCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pbnB1dFkgPSBudWxsO1xyXG4gICAgICAgIC8qKiAocHJpdmF0ZSkg66eI7KeA66eJIHVwZGF0ZShyQUYp6rCAIOuwnOyDne2VmOq4sCDsp4HsoITsnZgg66eI7Jqw7IqkIOychOy5mCAqL1xyXG4gICAgICAgIHRoaXMuX2JlZm9yZVggPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX2JlZm9yZVkgPSBudWxsO1xyXG4gICAgICAgIC8qKiAocHJpdmF0ZSkgdXBkYXRlKHJBRikg6rCE7J2YIGJlZm9yZVgsIGJlZm9yZVnsnZgg67OA7ZmU65+JICovXHJcbiAgICAgICAgdGhpcy5fbW92ZVggPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX21vdmVZID0gbnVsbDtcclxuICAgICAgICAvKiog66eI7Jqw7IqkIOuyhO2KvOydhCDriITrpbgg7JyE7LmY7JmAIOyLnOqwgSAqL1xyXG4gICAgICAgIHRoaXMuc3RhcnRYID0gbnVsbDtcclxuICAgICAgICB0aGlzLnN0YXJ0WSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5zdGFydFRpbWUgPSBudWxsO1xyXG4gICAgICAgIC8qKiDrp4jsmrDsiqQg67KE7Yq87J2EIOuGk+ydgCDsnITsuZjsmYAg7Iuc6rCBICovXHJcbiAgICAgICAgdGhpcy5lbmRYID0gbnVsbDtcclxuICAgICAgICB0aGlzLmVuZFkgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZW5kVGltZSA9IG51bGw7XHJcbiAgICB9XHJcbiAgICAvKiog66eI7KeA66eJIHVwZGF0ZShyQUYp6rCAIOuwnOyDne2VmOq4sCDsp4HsoITsnZgg66eI7Jqw7IqkIOychOy5mCAqL1xyXG4gICAgZ2V0IGJlZm9yZVgoKSB7IHJldHVybiB0aGlzLl9iZWZvcmVYOyB9XHJcbiAgICBnZXQgYmVmb3JlWSgpIHsgcmV0dXJuIHRoaXMuX2JlZm9yZVk7IH1cclxuICAgIC8qKiB1cGRhdGUockFGKSDqsITsnZggYmVmb3JlWCwgYmVmb3JlWeydmCDrs4DtmZTrn4kgKi9cclxuICAgIGdldCBtb3ZlWCgpIHsgcmV0dXJuIHRoaXMuX21vdmVYOyB9XHJcbiAgICBnZXQgbW92ZVkoKSB7IHJldHVybiB0aGlzLl9tb3ZlWTsgfVxyXG4gICAgY29ubmVjdChjYW52YXMsIGdhbWUpIHtcclxuICAgICAgICB0aGlzLm1vdXNlbW92ZSA9IGV2ID0+IHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVNb3VzZW1vdmUoZXYub2Zmc2V0WCwgZXYub2Zmc2V0WSwgZ2FtZSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLm1vdXNldXAgPSBldiA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlTW91c2V1cChldi5vZmZzZXRYLCBldi5vZmZzZXRZLCBldi50aW1lU3RhbXAsIGdhbWUpO1xyXG4gICAgICAgICAgICBjYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5tb3VzZW1vdmUpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5tb3VzZXVwKTtcclxuICAgICAgICAgICAgZ2FtZS5yQUZTeW5jTW91c2V1cE1lc3NhZ2UgPSB0cnVlO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5tb3VzZWRvd24gPSBldiA9PiB7XHJcbiAgICAgICAgICAgIGlmIChnYW1lLmFjY2VwdENvb3JkaW5hdGUoZXYub2Zmc2V0WCwgZXYub2Zmc2V0WSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlTW91c2Vkb3duKGV2Lm9mZnNldFgsIGV2Lm9mZnNldFksIGV2LnRpbWVTdGFtcCwgZ2FtZSk7XHJcbiAgICAgICAgICAgICAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5tb3VzZW1vdmUpO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMubW91c2V1cCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLm1vdXNlZG93bik7XHJcbiAgICB9XHJcbiAgICBkaXNjb25uZWN0KGNhbnZhcykge1xyXG4gICAgICAgIGlmICh0aGlzLm1vdXNlZG93bikge1xyXG4gICAgICAgICAgICBjYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5tb3VzZWRvd24pO1xyXG4gICAgICAgICAgICB0aGlzLm1vdXNlZG93biA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLm1vdXNlbW92ZSkge1xyXG4gICAgICAgICAgICBjYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5tb3VzZW1vdmUpO1xyXG4gICAgICAgICAgICB0aGlzLm1vdXNlbW92ZSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLm1vdXNldXApIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMubW91c2V1cCk7XHJcbiAgICAgICAgICAgIHRoaXMubW91c2V1cCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaGFuZGxlTW91c2Vkb3duKHgsIHksIHQsIGdhbWUpIHtcclxuICAgICAgICB0aGlzLnN0YXJ0WCA9IHg7XHJcbiAgICAgICAgdGhpcy5zdGFydFkgPSB5O1xyXG4gICAgICAgIHRoaXMuc3RhcnRUaW1lID0gdDtcclxuICAgICAgICB0aGlzLmVuZFggPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZW5kWSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5lbmRUaW1lID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9iZWZvcmVYID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9iZWZvcmVZID0gbnVsbDtcclxuICAgICAgICB0aGlzLmlucHV0WCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pbnB1dFkgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX21vdmVYID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9tb3ZlWSA9IG51bGw7XHJcbiAgICAgICAgZ2FtZS5yQUZTeW5jTW91c2Vkb3duTWVzc2FnZSA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBoYW5kbGVNb3VzZW1vdmUoeCwgeSwgZ2FtZSkge1xyXG4gICAgICAgIHRoaXMuaW5wdXRYID0geDtcclxuICAgICAgICB0aGlzLmlucHV0WSA9IHk7XHJcbiAgICB9XHJcbiAgICBoYW5kbGVNb3VzZXVwKHgsIHksIHQsIGdhbWUpIHtcclxuICAgICAgICB0aGlzLmVuZFggPSB4O1xyXG4gICAgICAgIHRoaXMuZW5kWSA9IHk7XHJcbiAgICAgICAgdGhpcy5lbmRUaW1lID0gdDtcclxuICAgICAgICBnYW1lLnJBRlN5bmNNb3VzZXVwTWVzc2FnZSA9IHRydWU7XHJcbiAgICB9XHJcbiAgICAvKiogckFGICovXHJcbiAgICBjbG9jaygpIHtcclxuICAgICAgICB0aGlzLl9tb3ZlWCA9IDA7XHJcbiAgICAgICAgdGhpcy5fbW92ZVkgPSAwO1xyXG4gICAgICAgIGlmICh0aGlzLl9iZWZvcmVYICE9IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5fbW92ZVggPSB0aGlzLmlucHV0WCAtIHRoaXMuX2JlZm9yZVg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLl9iZWZvcmVZICE9IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5fbW92ZVkgPSB0aGlzLmlucHV0WSAtIHRoaXMuX2JlZm9yZVk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmlucHV0WCAhPSBudWxsKVxyXG4gICAgICAgICAgICB0aGlzLl9iZWZvcmVYID0gdGhpcy5pbnB1dFg7XHJcbiAgICAgICAgaWYgKHRoaXMuaW5wdXRZICE9IG51bGwpXHJcbiAgICAgICAgICAgIHRoaXMuX2JlZm9yZVkgPSB0aGlzLmlucHV0WTtcclxuICAgIH1cclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/Input.ts\n");

/***/ }),

/***/ "./src/Piece.ts":
/*!**********************!*\
  !*** ./src/Piece.ts ***!
  \**********************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Piece; });\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config */ \"./src/config.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ \"./src/utils.ts\");\n\r\n\r\nconst AXIS = {\r\n    h: {\r\n        axis: 'x',\r\n        start: 'left',\r\n        end: 'right'\r\n    },\r\n    v: {\r\n        axis: 'y',\r\n        start: 'top',\r\n        end: 'bottom'\r\n    }\r\n};\r\nclass Piece {\r\n    constructor(tag, texture, srcX, srcY, srcD, viewD) {\r\n        /** 퍼즐 조각이 혼자서 움직일 때 (마우스를 놓을 때) 퍼즐 조각이 이동하는 경로 */\r\n        this.destX = null;\r\n        this.destY = null;\r\n        /** 퍼즐 조각의 이동 속도 (업데이트에 이용된다. 아님 말고.) */\r\n        this.velX = 0;\r\n        this.velY = 0;\r\n        this.tag = tag;\r\n        this.texture = texture;\r\n        this.sx = srcX;\r\n        this.sy = srcY;\r\n        this.srcSize = srcD;\r\n        this.size = viewD;\r\n    }\r\n    /** 퍼즐 조각의 목표 위치/현재 위치를 기반으로 퍼즐의 행렬 위치를 찾아낸다. */\r\n    whereami(left, top, boardSize, divideBy, flipH, flipV) {\r\n        let x = (this.destX != null ? this.destX : this.x) + this.size / 2;\r\n        let y = (this.destY != null ? this.destY : this.y) + this.size / 2;\r\n        return Object(_utils__WEBPACK_IMPORTED_MODULE_1__[\"getRowCol\"])(x, y, boardSize, left, top, divideBy, flipH, flipV);\r\n    }\r\n    /** 퍼즐 조각을 한 방향으로 움직인다. (대각선 이동은 구현에 좀 더 정교한 기하학을 필요로 한다.) 다른 퍼즐 조각과 부딪히는 경우 그것도 함께 밀어낸다. 이것은 **한 업데이트 사이클에서 모두 일어난다!** */\r\n    push(dist, direction, game, concern) {\r\n        const { axis, start, end } = AXIS[direction];\r\n        let backpress = null;\r\n        let est = this[axis] + dist;\r\n        if (est < game[start]) {\r\n            backpress = est - game[start];\r\n            est = game[start];\r\n        }\r\n        else if (est + this.size > game[end]) {\r\n            backpress = est + this.size - game[end];\r\n            est = game[end] - this.size;\r\n        }\r\n        this[axis] = est;\r\n        if (backpress)\r\n            return backpress;\r\n        for (const piece of concern) {\r\n            if (Piece.hitTest(this, piece)) {\r\n                let dist_ = (this.size * Math.sign(dist) + this[axis] - piece[axis]);\r\n                backpress = piece.push(dist_, direction, game, concern);\r\n                if (backpress != null) {\r\n                    this[axis] -= backpress;\r\n                    return backpress;\r\n                }\r\n            }\r\n        }\r\n        return backpress;\r\n    }\r\n    /** 업데이트한다. */\r\n    update(game) {\r\n        if (this.tag == _config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].blankTag)\r\n            return;\r\n        if (this.destX != null) {\r\n            let distX = this.destX - this.x;\r\n            if ((Math.abs(distX) < Math.abs(this.velX)) || (Math.abs(distX) < 0.1)) {\r\n                this.x = this.destX;\r\n                this.destX = null;\r\n                if (this.velX >= 3) {\r\n                    // tick!\r\n                }\r\n                this.velX = 0;\r\n            }\r\n            else {\r\n                this.velX = this.size / 6 * Math.sign(distX);\r\n            }\r\n        }\r\n        if (this.destY != null) {\r\n            let distY = this.destY - this.y;\r\n            if ((Math.abs(distY) < Math.abs(this.velY)) || (Math.abs(distY) < 0.1)) {\r\n                this.y = this.destY;\r\n                this.destY = null;\r\n                if (this.velY >= 3) {\r\n                    // tick!\r\n                }\r\n                this.velY = 0;\r\n            }\r\n            else {\r\n                this.velY = this.size / 6 * Math.sign(distY);\r\n            }\r\n        }\r\n        this.x += this.velX;\r\n        this.y += this.velY;\r\n        if (this.x < game.left) {\r\n            this.x = game.left;\r\n        }\r\n        else if (this.x + this.size > game.right) {\r\n            this.x = game.right - this.size;\r\n        }\r\n        if (this.y < game.top) {\r\n            this.y = game.top;\r\n        }\r\n        else if (this.y + this.size > game.bottom) {\r\n            this.y = game.bottom - this.size;\r\n        }\r\n    }\r\n    render(context, showLabel = true) {\r\n        if (this.tag != _config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].blankTag) {\r\n            context.fillStyle = 'white';\r\n            context.lineWidth = 1;\r\n            context.strokeRect(this.x, this.y, this.size, this.size);\r\n            context.fillRect(this.x, this.y, this.size, this.size);\r\n            context.drawImage(this.texture, this.sx, this.sy, this.srcSize, this.srcSize, this.x, this.y, this.size, this.size);\r\n            if (showLabel) {\r\n                context.font = Math.floor(this.size / 3) + 'px \"Exo 2\"';\r\n                context.lineWidth = 3;\r\n                const label = this.tag + 1;\r\n                context.strokeText(label.toString(), this.x + 4, this.y + this.size - 4);\r\n                context.fillText(label.toString(), this.x + 4, this.y + this.size - 4);\r\n            }\r\n        }\r\n    }\r\n    static hitTest(a, b) {\r\n        if (a == b || a.tag == _config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].blankTag || b.tag == _config__WEBPACK_IMPORTED_MODULE_0__[\"default\"].blankTag)\r\n            return false;\r\n        let leftA = a.x;\r\n        let rightA = a.x + a.size;\r\n        let topA = a.y;\r\n        let bottomA = a.y + a.size;\r\n        let leftB = b.x;\r\n        let rightB = b.x + b.size;\r\n        let topB = b.y;\r\n        let bottomB = b.y + b.size;\r\n        return leftA < rightB && leftB < rightA && topA < bottomB && topB < bottomA;\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvUGllY2UudHM/NTE3OCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUE4QjtBQUNNO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ2U7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHdEQUFTO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBLGVBQWUsbUJBQW1CO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwrQ0FBTTtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsK0NBQU07QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLCtDQUFNLHNCQUFzQiwrQ0FBTTtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiLi9zcmMvUGllY2UudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29uZmlnIGZyb20gXCIuL2NvbmZpZ1wiO1xyXG5pbXBvcnQgeyBnZXRSb3dDb2wgfSBmcm9tIFwiLi91dGlsc1wiO1xyXG5jb25zdCBBWElTID0ge1xyXG4gICAgaDoge1xyXG4gICAgICAgIGF4aXM6ICd4JyxcclxuICAgICAgICBzdGFydDogJ2xlZnQnLFxyXG4gICAgICAgIGVuZDogJ3JpZ2h0J1xyXG4gICAgfSxcclxuICAgIHY6IHtcclxuICAgICAgICBheGlzOiAneScsXHJcbiAgICAgICAgc3RhcnQ6ICd0b3AnLFxyXG4gICAgICAgIGVuZDogJ2JvdHRvbSdcclxuICAgIH1cclxufTtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGllY2Uge1xyXG4gICAgY29uc3RydWN0b3IodGFnLCB0ZXh0dXJlLCBzcmNYLCBzcmNZLCBzcmNELCB2aWV3RCkge1xyXG4gICAgICAgIC8qKiDtjbzsppAg7KGw6rCB7J20IO2YvOyekOyEnCDsm4Dsp4Hsnbwg65WMICjrp4jsmrDsiqTrpbwg64aT7J2EIOuVjCkg7Y287KaQIOyhsOqwgeydtCDsnbTrj5ntlZjripQg6rK966GcICovXHJcbiAgICAgICAgdGhpcy5kZXN0WCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5kZXN0WSA9IG51bGw7XHJcbiAgICAgICAgLyoqIO2NvOymkCDsobDqsIHsnZgg7J2064+ZIOyGjeuPhCAo7JeF642w7J207Yq47JeQIOydtOyaqeuQnOuLpC4g7JWE64uYIOunkOqzoC4pICovXHJcbiAgICAgICAgdGhpcy52ZWxYID0gMDtcclxuICAgICAgICB0aGlzLnZlbFkgPSAwO1xyXG4gICAgICAgIHRoaXMudGFnID0gdGFnO1xyXG4gICAgICAgIHRoaXMudGV4dHVyZSA9IHRleHR1cmU7XHJcbiAgICAgICAgdGhpcy5zeCA9IHNyY1g7XHJcbiAgICAgICAgdGhpcy5zeSA9IHNyY1k7XHJcbiAgICAgICAgdGhpcy5zcmNTaXplID0gc3JjRDtcclxuICAgICAgICB0aGlzLnNpemUgPSB2aWV3RDtcclxuICAgIH1cclxuICAgIC8qKiDtjbzsppAg7KGw6rCB7J2YIOuqqe2RnCDsnITsuZgv7ZiE7J6sIOychOy5mOulvCDquLDrsJjsnLzroZwg7Y287KaQ7J2YIO2WieugrCDsnITsuZjrpbwg7LC+7JWE64K464ukLiAqL1xyXG4gICAgd2hlcmVhbWkobGVmdCwgdG9wLCBib2FyZFNpemUsIGRpdmlkZUJ5LCBmbGlwSCwgZmxpcFYpIHtcclxuICAgICAgICBsZXQgeCA9ICh0aGlzLmRlc3RYICE9IG51bGwgPyB0aGlzLmRlc3RYIDogdGhpcy54KSArIHRoaXMuc2l6ZSAvIDI7XHJcbiAgICAgICAgbGV0IHkgPSAodGhpcy5kZXN0WSAhPSBudWxsID8gdGhpcy5kZXN0WSA6IHRoaXMueSkgKyB0aGlzLnNpemUgLyAyO1xyXG4gICAgICAgIHJldHVybiBnZXRSb3dDb2woeCwgeSwgYm9hcmRTaXplLCBsZWZ0LCB0b3AsIGRpdmlkZUJ5LCBmbGlwSCwgZmxpcFYpO1xyXG4gICAgfVxyXG4gICAgLyoqIO2NvOymkCDsobDqsIHsnYQg7ZWcIOuwqe2WpeycvOuhnCDsm4Dsp4Hsnbjri6QuICjrjIDqsIHshKAg7J2064+Z7J2AIOq1rO2YhOyXkCDsooAg642UIOygleq1kO2VnCDquLDtlZjtlZnsnYQg7ZWE7JqU66GcIO2VnOuLpC4pIOuLpOuluCDtjbzsppAg7KGw6rCB6rO8IOu2gOuUqu2eiOuKlCDqsr3smrAg6re46rKD64+EIO2VqOq7mCDrsIDslrTrgrjri6QuIOydtOqyg+ydgCAqKu2VnCDsl4XrjbDsnbTtirgg7IKs7J207YG07JeQ7IScIOuqqOuRkCDsnbzslrTrgpzri6QhKiogKi9cclxuICAgIHB1c2goZGlzdCwgZGlyZWN0aW9uLCBnYW1lLCBjb25jZXJuKSB7XHJcbiAgICAgICAgY29uc3QgeyBheGlzLCBzdGFydCwgZW5kIH0gPSBBWElTW2RpcmVjdGlvbl07XHJcbiAgICAgICAgbGV0IGJhY2twcmVzcyA9IG51bGw7XHJcbiAgICAgICAgbGV0IGVzdCA9IHRoaXNbYXhpc10gKyBkaXN0O1xyXG4gICAgICAgIGlmIChlc3QgPCBnYW1lW3N0YXJ0XSkge1xyXG4gICAgICAgICAgICBiYWNrcHJlc3MgPSBlc3QgLSBnYW1lW3N0YXJ0XTtcclxuICAgICAgICAgICAgZXN0ID0gZ2FtZVtzdGFydF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGVzdCArIHRoaXMuc2l6ZSA+IGdhbWVbZW5kXSkge1xyXG4gICAgICAgICAgICBiYWNrcHJlc3MgPSBlc3QgKyB0aGlzLnNpemUgLSBnYW1lW2VuZF07XHJcbiAgICAgICAgICAgIGVzdCA9IGdhbWVbZW5kXSAtIHRoaXMuc2l6ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpc1theGlzXSA9IGVzdDtcclxuICAgICAgICBpZiAoYmFja3ByZXNzKVxyXG4gICAgICAgICAgICByZXR1cm4gYmFja3ByZXNzO1xyXG4gICAgICAgIGZvciAoY29uc3QgcGllY2Ugb2YgY29uY2Vybikge1xyXG4gICAgICAgICAgICBpZiAoUGllY2UuaGl0VGVzdCh0aGlzLCBwaWVjZSkpIHtcclxuICAgICAgICAgICAgICAgIGxldCBkaXN0XyA9ICh0aGlzLnNpemUgKiBNYXRoLnNpZ24oZGlzdCkgKyB0aGlzW2F4aXNdIC0gcGllY2VbYXhpc10pO1xyXG4gICAgICAgICAgICAgICAgYmFja3ByZXNzID0gcGllY2UucHVzaChkaXN0XywgZGlyZWN0aW9uLCBnYW1lLCBjb25jZXJuKTtcclxuICAgICAgICAgICAgICAgIGlmIChiYWNrcHJlc3MgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXNbYXhpc10gLT0gYmFja3ByZXNzO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBiYWNrcHJlc3M7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGJhY2twcmVzcztcclxuICAgIH1cclxuICAgIC8qKiDsl4XrjbDsnbTtirjtlZzri6QuICovXHJcbiAgICB1cGRhdGUoZ2FtZSkge1xyXG4gICAgICAgIGlmICh0aGlzLnRhZyA9PSBjb25maWcuYmxhbmtUYWcpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBpZiAodGhpcy5kZXN0WCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIGxldCBkaXN0WCA9IHRoaXMuZGVzdFggLSB0aGlzLng7XHJcbiAgICAgICAgICAgIGlmICgoTWF0aC5hYnMoZGlzdFgpIDwgTWF0aC5hYnModGhpcy52ZWxYKSkgfHwgKE1hdGguYWJzKGRpc3RYKSA8IDAuMSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMueCA9IHRoaXMuZGVzdFg7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlc3RYID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnZlbFggPj0gMykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRpY2shXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZlbFggPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52ZWxYID0gdGhpcy5zaXplIC8gNiAqIE1hdGguc2lnbihkaXN0WCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZGVzdFkgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBsZXQgZGlzdFkgPSB0aGlzLmRlc3RZIC0gdGhpcy55O1xyXG4gICAgICAgICAgICBpZiAoKE1hdGguYWJzKGRpc3RZKSA8IE1hdGguYWJzKHRoaXMudmVsWSkpIHx8IChNYXRoLmFicyhkaXN0WSkgPCAwLjEpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnkgPSB0aGlzLmRlc3RZO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZXN0WSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy52ZWxZID49IDMpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB0aWNrIVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy52ZWxZID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudmVsWSA9IHRoaXMuc2l6ZSAvIDYgKiBNYXRoLnNpZ24oZGlzdFkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMueCArPSB0aGlzLnZlbFg7XHJcbiAgICAgICAgdGhpcy55ICs9IHRoaXMudmVsWTtcclxuICAgICAgICBpZiAodGhpcy54IDwgZ2FtZS5sZWZ0KSB7XHJcbiAgICAgICAgICAgIHRoaXMueCA9IGdhbWUubGVmdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy54ICsgdGhpcy5zaXplID4gZ2FtZS5yaWdodCkge1xyXG4gICAgICAgICAgICB0aGlzLnggPSBnYW1lLnJpZ2h0IC0gdGhpcy5zaXplO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy55IDwgZ2FtZS50b3ApIHtcclxuICAgICAgICAgICAgdGhpcy55ID0gZ2FtZS50b3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMueSArIHRoaXMuc2l6ZSA+IGdhbWUuYm90dG9tKSB7XHJcbiAgICAgICAgICAgIHRoaXMueSA9IGdhbWUuYm90dG9tIC0gdGhpcy5zaXplO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJlbmRlcihjb250ZXh0LCBzaG93TGFiZWwgPSB0cnVlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudGFnICE9IGNvbmZpZy5ibGFua1RhZykge1xyXG4gICAgICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9ICd3aGl0ZSc7XHJcbiAgICAgICAgICAgIGNvbnRleHQubGluZVdpZHRoID0gMTtcclxuICAgICAgICAgICAgY29udGV4dC5zdHJva2VSZWN0KHRoaXMueCwgdGhpcy55LCB0aGlzLnNpemUsIHRoaXMuc2l6ZSk7XHJcbiAgICAgICAgICAgIGNvbnRleHQuZmlsbFJlY3QodGhpcy54LCB0aGlzLnksIHRoaXMuc2l6ZSwgdGhpcy5zaXplKTtcclxuICAgICAgICAgICAgY29udGV4dC5kcmF3SW1hZ2UodGhpcy50ZXh0dXJlLCB0aGlzLnN4LCB0aGlzLnN5LCB0aGlzLnNyY1NpemUsIHRoaXMuc3JjU2l6ZSwgdGhpcy54LCB0aGlzLnksIHRoaXMuc2l6ZSwgdGhpcy5zaXplKTtcclxuICAgICAgICAgICAgaWYgKHNob3dMYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgY29udGV4dC5mb250ID0gTWF0aC5mbG9vcih0aGlzLnNpemUgLyAzKSArICdweCBcIkV4byAyXCInO1xyXG4gICAgICAgICAgICAgICAgY29udGV4dC5saW5lV2lkdGggPSAzO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGFiZWwgPSB0aGlzLnRhZyArIDE7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LnN0cm9rZVRleHQobGFiZWwudG9TdHJpbmcoKSwgdGhpcy54ICsgNCwgdGhpcy55ICsgdGhpcy5zaXplIC0gNCk7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0LmZpbGxUZXh0KGxhYmVsLnRvU3RyaW5nKCksIHRoaXMueCArIDQsIHRoaXMueSArIHRoaXMuc2l6ZSAtIDQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc3RhdGljIGhpdFRlc3QoYSwgYikge1xyXG4gICAgICAgIGlmIChhID09IGIgfHwgYS50YWcgPT0gY29uZmlnLmJsYW5rVGFnIHx8IGIudGFnID09IGNvbmZpZy5ibGFua1RhZylcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIGxldCBsZWZ0QSA9IGEueDtcclxuICAgICAgICBsZXQgcmlnaHRBID0gYS54ICsgYS5zaXplO1xyXG4gICAgICAgIGxldCB0b3BBID0gYS55O1xyXG4gICAgICAgIGxldCBib3R0b21BID0gYS55ICsgYS5zaXplO1xyXG4gICAgICAgIGxldCBsZWZ0QiA9IGIueDtcclxuICAgICAgICBsZXQgcmlnaHRCID0gYi54ICsgYi5zaXplO1xyXG4gICAgICAgIGxldCB0b3BCID0gYi55O1xyXG4gICAgICAgIGxldCBib3R0b21CID0gYi55ICsgYi5zaXplO1xyXG4gICAgICAgIHJldHVybiBsZWZ0QSA8IHJpZ2h0QiAmJiBsZWZ0QiA8IHJpZ2h0QSAmJiB0b3BBIDwgYm90dG9tQiAmJiB0b3BCIDwgYm90dG9tQTtcclxuICAgIH1cclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/Piece.ts\n");

/***/ }),

/***/ "./src/PuzzleSet.ts":
/*!**************************!*\
  !*** ./src/PuzzleSet.ts ***!
  \**************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return PuzzleSet; });\n/**\r\n * PuzzleSet은 그림, 정사각형 영역, 해결 가능 여부를 모아놓은 것이다.\r\n *\r\n * 행이나 열을 뒤집는 기능 따위는 없다.\r\n */\r\nclass PuzzleSet {\r\n    constructor(imagepath, srcX, srcY, dimension, solvable) {\r\n        this.texture = new Image();\r\n        this.texture.src = '/img/' + imagepath;\r\n        this.srcX = srcX;\r\n        this.srcY = srcY;\r\n        this.dimension = dimension;\r\n        this.solvable = solvable;\r\n    }\r\n    /**\r\n     * 행, 열 번호로 이미지에서 참조할 좌표를 찾는다.\r\n     * @param row\r\n     * @param col\r\n     * @param divideBy\r\n     */\r\n    getPosition(row, col, divideBy) {\r\n        let d = this.dimension / divideBy;\r\n        return [this.srcX + col * d, this.srcY + row * d];\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvUHV6emxlU2V0LnRzP2VmMjAiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6Ii4vc3JjL1B1enpsZVNldC50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBQdXp6bGVTZXTsnYAg6re466a8LCDsoJXsgqzqsIHtmJUg7JiB7JetLCDtlbTqsrAg6rCA64qlIOyXrOu2gOulvCDrqqjslYTrhpPsnYAg6rKD7J2064ukLlxyXG4gKlxyXG4gKiDtlonsnbTrgpgg7Je07J2EIOuSpOynkeuKlCDquLDriqUg65Sw7JyE64qUIOyXhuuLpC5cclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFB1enpsZVNldCB7XHJcbiAgICBjb25zdHJ1Y3RvcihpbWFnZXBhdGgsIHNyY1gsIHNyY1ksIGRpbWVuc2lvbiwgc29sdmFibGUpIHtcclxuICAgICAgICB0aGlzLnRleHR1cmUgPSBuZXcgSW1hZ2UoKTtcclxuICAgICAgICB0aGlzLnRleHR1cmUuc3JjID0gJy9pbWcvJyArIGltYWdlcGF0aDtcclxuICAgICAgICB0aGlzLnNyY1ggPSBzcmNYO1xyXG4gICAgICAgIHRoaXMuc3JjWSA9IHNyY1k7XHJcbiAgICAgICAgdGhpcy5kaW1lbnNpb24gPSBkaW1lbnNpb247XHJcbiAgICAgICAgdGhpcy5zb2x2YWJsZSA9IHNvbHZhYmxlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiDtloksIOyXtCDrsojtmLjroZwg7J2066+47KeA7JeQ7IScIOywuOyhsO2VoCDsooztkZzrpbwg7LC+64qU64ukLlxyXG4gICAgICogQHBhcmFtIHJvd1xyXG4gICAgICogQHBhcmFtIGNvbFxyXG4gICAgICogQHBhcmFtIGRpdmlkZUJ5XHJcbiAgICAgKi9cclxuICAgIGdldFBvc2l0aW9uKHJvdywgY29sLCBkaXZpZGVCeSkge1xyXG4gICAgICAgIGxldCBkID0gdGhpcy5kaW1lbnNpb24gLyBkaXZpZGVCeTtcclxuICAgICAgICByZXR1cm4gW3RoaXMuc3JjWCArIGNvbCAqIGQsIHRoaXMuc3JjWSArIHJvdyAqIGRdO1xyXG4gICAgfVxyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/PuzzleSet.ts\n");

/***/ }),

/***/ "./src/Running.ts":
/*!************************!*\
  !*** ./src/Running.ts ***!
  \************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Running; });\nclass Running {\r\n    constructor(update) {\r\n        this.running = false;\r\n        this.a = null;\r\n        this.id = null;\r\n        this.update = update;\r\n    }\r\n    start() {\r\n        this.running = true;\r\n        this.a = (t) => {\r\n            this.update();\r\n            if (this.running) {\r\n                this.id = requestAnimationFrame(this.a);\r\n            }\r\n        };\r\n        this.id = requestAnimationFrame(this.a);\r\n    }\r\n    stop() {\r\n        this.running = false;\r\n        cancelAnimationFrame(this.id);\r\n        this.a = null;\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvUnVubmluZy50cz8wNDM1Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6Ii4vc3JjL1J1bm5pbmcudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBSdW5uaW5nIHtcclxuICAgIGNvbnN0cnVjdG9yKHVwZGF0ZSkge1xyXG4gICAgICAgIHRoaXMucnVubmluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuYSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy51cGRhdGUgPSB1cGRhdGU7XHJcbiAgICB9XHJcbiAgICBzdGFydCgpIHtcclxuICAgICAgICB0aGlzLnJ1bm5pbmcgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuYSA9ICh0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnJ1bm5pbmcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaWQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5hKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5pZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmEpO1xyXG4gICAgfVxyXG4gICAgc3RvcCgpIHtcclxuICAgICAgICB0aGlzLnJ1bm5pbmcgPSBmYWxzZTtcclxuICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmlkKTtcclxuICAgICAgICB0aGlzLmEgPSBudWxsO1xyXG4gICAgfVxyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/Running.ts\n");

/***/ }),

/***/ "./src/config.ts":
/*!***********************!*\
  !*** ./src/config.ts ***!
  \***********************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nconst config = {\r\n    blankTag: 0,\r\n    showLabel: false\r\n};\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (config);\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29uZmlnLnRzP2ZmMjkiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNlLHFFQUFNLEVBQUMiLCJmaWxlIjoiLi9zcmMvY29uZmlnLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgY29uZmlnID0ge1xyXG4gICAgYmxhbmtUYWc6IDAsXHJcbiAgICBzaG93TGFiZWw6IGZhbHNlXHJcbn07XHJcbmV4cG9ydCBkZWZhdWx0IGNvbmZpZztcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/config.ts\n");

/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _PuzzleSet__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./PuzzleSet */ \"./src/PuzzleSet.ts\");\n/* harmony import */ var _Running__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Running */ \"./src/Running.ts\");\n/* harmony import */ var _Game__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Game */ \"./src/Game.ts\");\n\r\n\r\n\r\nconst canvas = document.getElementsByTagName('canvas')[0];\r\nconst context = canvas.getContext('2d');\r\nconst puzzleSets = [\r\n    new _PuzzleSet__WEBPACK_IMPORTED_MODULE_0__[\"default\"]('0.png', 0, 0, 1024, false),\r\n    new _PuzzleSet__WEBPACK_IMPORTED_MODULE_0__[\"default\"]('1.png', 0, 0, 1024, false),\r\n    new _PuzzleSet__WEBPACK_IMPORTED_MODULE_0__[\"default\"]('2.png', 0, 0, 1024, false),\r\n    new _PuzzleSet__WEBPACK_IMPORTED_MODULE_0__[\"default\"]('3.png', 0, 0, 1024, false),\r\n    new _PuzzleSet__WEBPACK_IMPORTED_MODULE_0__[\"default\"]('4.png', 0, 0, 1024, false),\r\n    new _PuzzleSet__WEBPACK_IMPORTED_MODULE_0__[\"default\"]('5.png', 0, 0, 1024, false),\r\n    new _PuzzleSet__WEBPACK_IMPORTED_MODULE_0__[\"default\"]('6.png', 186, 27, 320, true),\r\n    new _PuzzleSet__WEBPACK_IMPORTED_MODULE_0__[\"default\"]('7.png', 146, 0, 467, false),\r\n];\r\nconst puzzleSelector = document.getElementById('puzzle-selector');\r\nlet game;\r\nlet running;\r\nconst sizeInput = document.getElementById('size');\r\nfunction createGame(puzzleSet, size) {\r\n    if (game)\r\n        game.input.disconnect(canvas);\r\n    game = new _Game__WEBPACK_IMPORTED_MODULE_2__[\"default\"](size, puzzleSet, 20, 20, 320);\r\n    if (running)\r\n        running.stop();\r\n    running = new _Running__WEBPACK_IMPORTED_MODULE_1__[\"default\"](() => {\r\n        game.update();\r\n        game.render(context);\r\n    });\r\n}\r\nconst startButton = document.getElementById('start');\r\nconst applyButton = document.getElementById('apply-setting');\r\napplyButton.addEventListener('click', () => {\r\n    if (running)\r\n        running.stop();\r\n    createGame(puzzleSets[puzzleSelector.value], sizeInput.valueAsNumber);\r\n    game.render(context);\r\n    startButton.disabled = false;\r\n});\r\nstartButton.addEventListener('click', () => {\r\n    if (running)\r\n        running.stop();\r\n    game.shuffle();\r\n    game.initViewForModel();\r\n    game.input.connect(canvas, game);\r\n    running.start();\r\n});\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHM/NzFiZCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFvQztBQUNKO0FBQ047QUFDMUI7QUFDQTtBQUNBO0FBQ0EsUUFBUSxrREFBUztBQUNqQixRQUFRLGtEQUFTO0FBQ2pCLFFBQVEsa0RBQVM7QUFDakIsUUFBUSxrREFBUztBQUNqQixRQUFRLGtEQUFTO0FBQ2pCLFFBQVEsa0RBQVM7QUFDakIsUUFBUSxrREFBUztBQUNqQixRQUFRLGtEQUFTO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLDZDQUFJO0FBQ25CO0FBQ0E7QUFDQSxrQkFBa0IsZ0RBQU87QUFDekI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDIiwiZmlsZSI6Ii4vc3JjL2luZGV4LnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFB1enpsZVNldCBmcm9tICcuL1B1enpsZVNldCc7XHJcbmltcG9ydCBSdW5uaW5nIGZyb20gJy4vUnVubmluZyc7XHJcbmltcG9ydCBHYW1lIGZyb20gJy4vR2FtZSc7XHJcbmNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdjYW52YXMnKVswXTtcclxuY29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG5jb25zdCBwdXp6bGVTZXRzID0gW1xyXG4gICAgbmV3IFB1enpsZVNldCgnMC5wbmcnLCAwLCAwLCAxMDI0LCBmYWxzZSksXHJcbiAgICBuZXcgUHV6emxlU2V0KCcxLnBuZycsIDAsIDAsIDEwMjQsIGZhbHNlKSxcclxuICAgIG5ldyBQdXp6bGVTZXQoJzIucG5nJywgMCwgMCwgMTAyNCwgZmFsc2UpLFxyXG4gICAgbmV3IFB1enpsZVNldCgnMy5wbmcnLCAwLCAwLCAxMDI0LCBmYWxzZSksXHJcbiAgICBuZXcgUHV6emxlU2V0KCc0LnBuZycsIDAsIDAsIDEwMjQsIGZhbHNlKSxcclxuICAgIG5ldyBQdXp6bGVTZXQoJzUucG5nJywgMCwgMCwgMTAyNCwgZmFsc2UpLFxyXG4gICAgbmV3IFB1enpsZVNldCgnNi5wbmcnLCAxODYsIDI3LCAzMjAsIHRydWUpLFxyXG4gICAgbmV3IFB1enpsZVNldCgnNy5wbmcnLCAxNDYsIDAsIDQ2NywgZmFsc2UpLFxyXG5dO1xyXG5jb25zdCBwdXp6bGVTZWxlY3RvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwdXp6bGUtc2VsZWN0b3InKTtcclxubGV0IGdhbWU7XHJcbmxldCBydW5uaW5nO1xyXG5jb25zdCBzaXplSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2l6ZScpO1xyXG5mdW5jdGlvbiBjcmVhdGVHYW1lKHB1enpsZVNldCwgc2l6ZSkge1xyXG4gICAgaWYgKGdhbWUpXHJcbiAgICAgICAgZ2FtZS5pbnB1dC5kaXNjb25uZWN0KGNhbnZhcyk7XHJcbiAgICBnYW1lID0gbmV3IEdhbWUoc2l6ZSwgcHV6emxlU2V0LCAyMCwgMjAsIDMyMCk7XHJcbiAgICBpZiAocnVubmluZylcclxuICAgICAgICBydW5uaW5nLnN0b3AoKTtcclxuICAgIHJ1bm5pbmcgPSBuZXcgUnVubmluZygoKSA9PiB7XHJcbiAgICAgICAgZ2FtZS51cGRhdGUoKTtcclxuICAgICAgICBnYW1lLnJlbmRlcihjb250ZXh0KTtcclxuICAgIH0pO1xyXG59XHJcbmNvbnN0IHN0YXJ0QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXJ0Jyk7XHJcbmNvbnN0IGFwcGx5QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FwcGx5LXNldHRpbmcnKTtcclxuYXBwbHlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBpZiAocnVubmluZylcclxuICAgICAgICBydW5uaW5nLnN0b3AoKTtcclxuICAgIGNyZWF0ZUdhbWUocHV6emxlU2V0c1twdXp6bGVTZWxlY3Rvci52YWx1ZV0sIHNpemVJbnB1dC52YWx1ZUFzTnVtYmVyKTtcclxuICAgIGdhbWUucmVuZGVyKGNvbnRleHQpO1xyXG4gICAgc3RhcnRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxufSk7XHJcbnN0YXJ0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgaWYgKHJ1bm5pbmcpXHJcbiAgICAgICAgcnVubmluZy5zdG9wKCk7XHJcbiAgICBnYW1lLnNodWZmbGUoKTtcclxuICAgIGdhbWUuaW5pdFZpZXdGb3JNb2RlbCgpO1xyXG4gICAgZ2FtZS5pbnB1dC5jb25uZWN0KGNhbnZhcywgZ2FtZSk7XHJcbiAgICBydW5uaW5nLnN0YXJ0KCk7XHJcbn0pO1xyXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/index.ts\n");

/***/ }),

/***/ "./src/utils.ts":
/*!**********************!*\
  !*** ./src/utils.ts ***!
  \**********************/
/*! exports provided: getRowCol */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getRowCol\", function() { return getRowCol; });\nfunction quantize(pos, parentSize, offset, divideBy, flip) {\r\n    let n = Math.floor((pos - offset) / (parentSize / divideBy));\r\n    if (flip)\r\n        n = divideBy - n - 1;\r\n    return n;\r\n}\r\nfunction getRowCol(x, y, parentSize, left, top, divideBy, flipH, flipV) {\r\n    return [\r\n        quantize(y, parentSize, top, divideBy, flipV),\r\n        quantize(x, parentSize, left, divideBy, flipH)\r\n    ];\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdXRpbHMudHM/MjA1MyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6Ii4vc3JjL3V0aWxzLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gcXVhbnRpemUocG9zLCBwYXJlbnRTaXplLCBvZmZzZXQsIGRpdmlkZUJ5LCBmbGlwKSB7XHJcbiAgICBsZXQgbiA9IE1hdGguZmxvb3IoKHBvcyAtIG9mZnNldCkgLyAocGFyZW50U2l6ZSAvIGRpdmlkZUJ5KSk7XHJcbiAgICBpZiAoZmxpcClcclxuICAgICAgICBuID0gZGl2aWRlQnkgLSBuIC0gMTtcclxuICAgIHJldHVybiBuO1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRSb3dDb2woeCwgeSwgcGFyZW50U2l6ZSwgbGVmdCwgdG9wLCBkaXZpZGVCeSwgZmxpcEgsIGZsaXBWKSB7XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgIHF1YW50aXplKHksIHBhcmVudFNpemUsIHRvcCwgZGl2aWRlQnksIGZsaXBWKSxcclxuICAgICAgICBxdWFudGl6ZSh4LCBwYXJlbnRTaXplLCBsZWZ0LCBkaXZpZGVCeSwgZmxpcEgpXHJcbiAgICBdO1xyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/utils.ts\n");

/***/ })

/******/ });